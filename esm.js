(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";var _index=_interopRequireDefault(require("../index"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}window.Amonite=_index["default"];

},{"../index":2}],2:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=init,exports.initAll=initAll,Object.defineProperty(exports,"Component",{enumerable:!0,get:function get(){return _component["default"]}}),Object.defineProperty(exports,"Section",{enumerable:!0,get:function get(){return _section["default"]}}),Object.defineProperty(exports,"Page",{enumerable:!0,get:function get(){return _page["default"]}}),Object.defineProperty(exports,"define",{enumerable:!0,get:function get(){return _define.define}}),Object.defineProperty(exports,"CustomHTMLElement",{enumerable:!0,get:function get(){return _define.CustomHTMLElement}}),Object.defineProperty(exports,"ajax",{enumerable:!0,get:function get(){return _ajax["default"]}}),Object.defineProperty(exports,"Resource",{enumerable:!0,get:function get(){return _resource["default"]}}),Object.defineProperty(exports,"Router",{enumerable:!0,get:function get(){return _router["default"]}}),Object.defineProperty(exports,"Route",{enumerable:!0,get:function get(){return _route["default"]}}),exports["default"]=void 0;var _component=_interopRequireDefault(require("./libs/layout/component")),_section=_interopRequireDefault(require("./libs/layout/section")),_page=_interopRequireDefault(require("./libs/layout/page")),_define=require("./libs/layout/define"),_ajax=_interopRequireDefault(require("./libs/request/ajax")),_resource=_interopRequireDefault(require("./libs/request/resource")),_router=_interopRequireDefault(require("./libs/router/router")),_route=_interopRequireDefault(require("./libs/router/route"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function init(a){"function"==typeof a&&("complete"===document.readyState?a():window.addEventListener("load",a))}function initAll(a){"complete"===document.readyState?(_page["default"].setContainer(),_router["default"].listenPopstate(),"function"==typeof a&&a()):window.addEventListener("load",function(){_page["default"].setContainer(),_router["default"].listenPopstate(),"function"==typeof a&&a()})}var Amonite={Component:_component["default"],Section:_section["default"],Page:_page["default"],define:_define.define,CustomHTMLElement:_define.CustomHTMLElement,ajax:_ajax["default"],Resource:_resource["default"],Router:_router["default"],Route:_route["default"],init:init,initAll:initAll};exports["default"]=Amonite;

},{"./libs/layout/component":3,"./libs/layout/define":4,"./libs/layout/page":5,"./libs/layout/section":6,"./libs/request/ajax":7,"./libs/request/resource":8,"./libs/router/route":9,"./libs/router/router":10}],3:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(a,b){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a)){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}}function _arrayWithHoles(a){if(Array.isArray(a))return a}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}}function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function container(a,b,c){return a instanceof HTMLElement?a:"string"==typeof a?container(document.querySelector(a),b,c):"function"==typeof a?container(a.apply(b,c),b,c):null}function template(a,b,c){if(a instanceof HTMLElement)return a;if("function"==typeof a)return template(a.apply(b,c),b,c);var d=document.createElement("div");return d.setAttribute("component",b.constructor.name),"string"==typeof a&&(d.innerHTML=a),d}function elements(a,b,c){var d=b.template;if("function"==typeof a)return elements(a.apply(b,c),b,c);if("object"===_typeof(a)&&d instanceof HTMLElement){var e={};return Object.keys(a).forEach(function(b){a[b]instanceof HTMLElement&&(e[b]=[a[b]]),"string"==typeof a[b]?e[b]=_toConsumableArray(d.querySelectorAll(a[b])):a[b]&&a[b].forEach&&(e[b]=a[b])}),e}return{}}function events(a,b,c){var d=this,e=arguments;return"function"==typeof a?events(a.apply(b,c),b,c):void("object"===_typeof(a)&&Object.keys(a).forEach(function(c){var f=c.split(" ");if("string"==typeof a[c]&&1<f.length){var g=f.pop(),h=f.join(" ");a[c].split(",").forEach(function(a){g.split(",").forEach(function(c){h.split(",").forEach(function(d){var f,g=function(){b[a].apply(b,e)};c&&"function"==typeof b[a]&&((f=b.elements[d])instanceof HTMLElement?f.addEventListener(c,g):f&&f.forEach?f.forEach(function(a){a.addEventListener(c,g)}):b.template&&(f=b.template.querySelector(d))&&f.addEventListener(c,g))})})})}else if("object"===_typeof(a[c])){var i=f.join(" ");Object.keys(a[c]).forEach(function(f){var g=a[c][f];"string"==typeof g&&f.split(",").forEach(function(a){i.split(",").forEach(function(c){var f,h=function(){var a=_toConsumableArray(e);a.unshift(d),b[g].apply(b,a)};a&&"function"==typeof b[g]&&((f=b.elements[c])instanceof HTMLElement?f.addEventListener(a,h):f&&f.forEach?f.forEach(function(b){b.addEventListener(a,h)}):b.template&&(f=b.template.querySelector(c))&&f.addEventListener(a,h))})})})}}))}var Component=function(){function a(){_classCallCheck(this,a),Object.defineProperty(this,"_builder",{enumerable:!1,configurable:!1,value:{template:this.template,elements:this.elements,events:this.events}}),Object.defineProperty(this,"__events__",{enumerable:!1,configurable:!1,value:{}}),this.setTemplate.apply(this,[null].concat(Array.prototype.slice.call(arguments)))}return _createClass(a,[{key:"setTemplate",value:function setTemplate(){var a=Array.prototype.slice.call(arguments),b=a[0],c=a.slice(1),d=template(b||this._builder.template,this,c);return d instanceof HTMLElement&&(this.template=d,this.elements=elements(this._builder.elements,this,c),events(this._builder.events,this,c)),this}},{key:"setContainer",value:function setContainer(a){var b=container(a,this,arguments);return b instanceof HTMLElement&&(this.container=b,this.template instanceof HTMLElement&&this.container.appendChild(this.template)),this}},{key:"clearElement",value:function clearElement(a){var b,c,d;if(this.elements[a]&&(b=this.elements[a],c=_slicedToArray(b,1),d=c[0],b)){for(;d.firstChild;)d.removeChild(d.firstChild);return this}throw new Error("Element \"".concat(a,"\" is not an element of this component"))}},{key:"appendComponent",value:function appendComponent(b,c){var d,e,f;if(this.elements[b]&&(d=this.elements[b],e=_slicedToArray(d,1),f=e[0],d)){if(c instanceof a)return c.setContainer(f),this;throw new Error("Second parameter is not a Component object")}else throw new Error("Element \"".concat(b,"\" is not an element of this component"))}},{key:"fillComponent",value:function fillComponent(a,b){return this.clearElement(a).appendComponent(a,b)}},{key:"template",value:function(){return""}},{key:"elements",value:function(){return{}}},{key:"events",value:function(){return{}}},{key:"listen",value:function listen(a,b){var c=this;if("string"==typeof a){var d=a.split(/[\n\s,]+/g);if(1<d.length)return this.listen(_toConsumableArray(d),b)}else if(Array.isArray(a))return a.forEach(function(a){c.listen(a,b)}),this;if(Array.isArray(b))return b.forEach(function(b){c.listen(a,b)}),this;if("function"==typeof b){var e=this.__events__;Array.isArray(e[a])||(e[a]=[]),e[a].push(b)}return this}},{key:"dispatch",value:function dispatch(a,b){var c=this;if("string"==typeof a){var e=a.split(/[\n\s,]+/g);if(1<e.length)return this.listen(_toConsumableArray(e),b)}else if(Array.isArray(a))return a.forEach(function(a){c.listen(a,b)}),this;var d=this.__events__;return Array.isArray(d[a])||(d[a]=[]),d[a].forEach(function(a){Array.isArray(b)?a.apply(null,b):a()}),this}},{key:"detach",value:function detach(a,b){var c=this;if("string"==typeof a){var e=a.split(/[\n\s,]+/g);if(1<e.length)return this.listen(_toConsumableArray(e),b)}else if(Array.isArray(a))return a.forEach(function(a){c.listen(a,b)}),this;if(Array.isArray(b))return b.forEach(function(b){c.listen(a,b)}),this;var d=this.__events__;return Array.isArray(d[a])||(d[a]=[]),d[a]=void 0===b?[]:d[a].slice(d[a].indexOf(b)),this}},{key:"listenOnce",value:function listenOnce(a,b){var c=this,d=function(){c.detach(a,b),c.detach(a,d)};return this.listen(a,b),this.listen(a,d),this}}]),a}();exports["default"]=Component;

},{}],4:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.define=exports["default"]=define,exports.CustomHTMLElement=void 0;function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}}function getCustomChildren(a){return _toConsumableArray(a.querySelectorAll(Object.keys(DEFINES).join(",").toUpperCase()))}function test(a){var b=DEFINES[a.nodeName.toUpperCase()];if(-1===DEFINED.indexOf(a)){if(b){new b(a);var c=getCustomChildren(a);c.length?c.forEach(function(b){b.addEventListener("load",function(){c.filter(function(a){return-1===DEFINED.indexOf(a)}).length||(DEFINED.push(a),a.dispatchEvent(new Event("load")))})}):(DEFINED.push(a),a.dispatchEvent(new Event("load")))}a.childNodes.length&&a.childNodes.forEach(test)}}function onload(){var a=new MutationObserver(function(a){a.forEach(function(a){a.addedNodes.forEach(test)})});a.observe(document.querySelector("html"),{attributes:!0,childList:!0,characterData:!0,subtree:!0})}window.addEventListener("load",onload),"complete"===window.document.readyState&&onload();var DEFINES={},DEFINED=[];function define(a,b){if("string"!=typeof a)throw new Error("First parameter should be a string (to select items by node name in dom tree)");if("function"!=typeof b)throw new Error("Second parameter should be a class or a function (to construct item)");DEFINES[a.toUpperCase()]=b,_toConsumableArray(document.querySelectorAll(a.toUpperCase())).forEach(test)}var CustomHTMLElement=function a(){_classCallCheck(this,a)};exports.CustomHTMLElement=CustomHTMLElement;

},{}],5:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _component=_interopRequireDefault(require("./component")),_section=_interopRequireDefault(require("./section"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _possibleConstructorReturn(a,b){return b&&("object"===_typeof(b)||"function"==typeof b)?b:_assertThisInitialized(a)}function _getPrototypeOf(a){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},_getPrototypeOf(a)}function _assertThisInitialized(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&_setPrototypeOf(a,b)}function _setPrototypeOf(a,b){return _setPrototypeOf=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},_setPrototypeOf(a,b)}var Page=function(a){function b(){var a;return _classCallCheck(this,b),a=_possibleConstructorReturn(this,_getPrototypeOf(b).call(this,b.container)),a.template.setAttribute("page",a.template.getAttribute("component")),a.template.removeAttribute("component"),b.instances[a.constructor.name]=_assertThisInitialized(a),a}return _inherits(b,a),_createClass(b,[{key:"setSection",value:function setSection(a){return a instanceof _section["default"]&&this.fillComponent("section",a),this}},{key:"setPage",value:function setPage(a){if(b.page!==this){for(var c=b.container;c.firstChild;)c.removeChild(c.firstChild);this.setContainer(into),b.page=this}return this.setSection(a)}}],[{key:"setContainer",value:function setContainer(a){return"function"==typeof a?b.setContainer(a()):void("string"==typeof a&&(a=document.querySelector(a)),b.container=a instanceof HTMLElement?a:b.container||document.body,b.page&&b.page.setContainer(a))}},{key:"getCurrentPage",value:function getCurrentPage(){return b.page}},{key:"getPageByConstructor",value:function getPageByConstructor(a){var c=b.instances[a.name];return c instanceof b?c:new a}}]),b}(_component["default"]);exports["default"]=Page,Page.instances={},Page.container=null;

},{"./component":3,"./section":6}],6:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _component=_interopRequireDefault(require("./component")),_page=_interopRequireDefault(require("./page"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _possibleConstructorReturn(a,b){return b&&("object"===_typeof(b)||"function"==typeof b)?b:_assertThisInitialized(a)}function _assertThisInitialized(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _getPrototypeOf(a){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},_getPrototypeOf(a)}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&_setPrototypeOf(a,b)}function _setPrototypeOf(a,b){return _setPrototypeOf=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},_setPrototypeOf(a,b)}var Section=function(a){function b(){var a;return _classCallCheck(this,b),a=_possibleConstructorReturn(this,_getPrototypeOf(b).apply(this,arguments)),a.template.setAttribute("section",a.template.getAttribute("component")),a.template.removeAttribute("component"),a}return _inherits(b,a),_createClass(b,[{key:"setSection",value:function setSection(){var a=this.getWrapper();return a&&(a.setPage(this),this._builder.wrapper=a),this}},{key:"getWrapper",value:function getWrapper(){return this._builder.wrapper||(this._builder.wrapper=_page["default"].getPageByConstructor(this.wrapper())),this._builder.wrapper}},{key:"wrapper",value:function wrapper(){return null}}]),b}(_component["default"]);exports["default"]=Section;

},{"./component":3,"./page":5}],7:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ajax=exports["default"]=ajax,exports.ajaxParameters=ajaxParameters,exports.tryExec=tryExec;function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function ajax(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=ajaxParameters.apply(null,b),e=new Promise(function(a,b){var c=new XMLHttpRequest;c.addEventListener("loadend",function(){a(c)}),c.addEventListener("error",function(){b(c)}),c.open(d.method,d.uri),"object"===_typeof(d.headers)&&null!==d.headers&&Object.keys(d.headers).forEach(function(a){var b=tryExec(d.headers[a]);"string"==typeof b&&c.setRequestHeader(a,b)}),"string"==typeof d.overrideMimeType&&c.overrideMimeType(d.overrideMimeType),c.send(d.data)});return Array.isArray(d.success)&&d.success.forEach(function(a){"function"==typeof a&&e.then(a)}),"function"==typeof d.success&&e.then(d.success),Array.isArray(d.failure)&&d.failure.forEach(function(a){"function"==typeof a&&e["catch"](a)}),"function"==typeof d.failure&&e["catch"](d.failure),e}function ajaxParameters(a,b,c,d,e,f,g){return"object"===_typeof(a)?ajaxParameters(a.method,a.uri||a.url||a.file||a.source,a.data||a.body||a.post,a.success||a.load,a.failure||a.error,a.headers,a.overrideMimeType):{method:tryExec.call(this,a,"GET",arguments),uri:tryExec.call(this,b,"",arguments),data:tryExec.call(this,c,null,arguments),success:d,failure:e,headers:tryExec.call(this,f,null,arguments),overrideMimeType:tryExec.call(this,g,null,arguments)}}function tryExec(a,b,c){return"function"==typeof a?a.apply(this,c):"string"==typeof a?a:b}

},{}],8:[function(require,module,exports){
"use strict";var _ajax=_interopRequireDefault(require("./ajax"));Object.defineProperty(exports,"__esModule",{value:!0}),exports.merge=merge,exports.Resource=exports["default"]=void 0;function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function merge(){for(var a={},b=[],c=[],d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];for(;e.length;){var g=e.shift();Array.isArray(g.success)&&b.concat(g.success),"function"==typeof g.success&&b.push(g.success),Array.isArray(g.failure)&&c.concat(g.failure),"function"==typeof g.failure&&c.push(g.failure),Object.assign(a,g)}return a.success=b,a.failure=c,a}function ajaxParameters(a,b,c,d,e,f,g){return"object"===_typeof(a)&&null!==a?ajaxParameters(a.method,a.uri||a.url||a.file||a.source,a.data||a.body||a.post,a.success||a.load,a.failure||a.error,a.headers,a.overrideMimeType):{method:a,uri:b,data:c,success:d,failure:e,headers:f,overrideMimeType:g}}var Resource=function(){function a(){_classCallCheck(this,a);for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];this.commonBuilder=ajaxParameters.apply(null,c),this.methodsBuilder={}}return _createClass(a,[{key:"addMethod",value:function addMethod(a){for(var b=arguments,c=arguments.length,d=Array(1<c?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];var f=this;if(this[a])throw new Error("This resource already has a ".concat(a," method"));return this.methodsBuilder[a]=ajaxParameters.apply(null,d),this[a]=function(){var c=ajaxParameters.apply(null,b);return(0,_ajax["default"])(merge(f.commonBuilder,f.methodsBuilder[a],c))},this}}],[{key:"request",value:function request(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=ajaxParameters.apply(null,b);return(0,_ajax["default"])(d)}}]),a}();exports.Resource=exports["default"]=Resource;

},{"./ajax":7}],9:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FORMATS=exports.Route=exports["default"]=void 0;function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(a,b){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a)){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}}function _arrayWithHoles(a){if(Array.isArray(a))return a}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}var FORMATS={number:function number(a){var b=parseFloat(a);if(isNaN(b))throw new Error("Bad type: expect argument to be a number.");return b},integer:function integer(a){var b=parseInt(a);if(isNaN(b))throw new Error("Bad type: expect argument to be an integer.");return b},float:function float(a){var b=parseFloat(a);if(isNaN(b))throw new Error("Bad type: expect argument to be a float.");return b},text:function text(a){try{var b=JSON.parse(a);if("string"==typeof b)return b}catch(a){}return a},object:function object(a){try{var b=JSON.parse(a);if("object"===_typeof(b))return b}catch(a){}throw new Error("Bad type: expect argument to be an object.")},boolean:function boolean(a){try{var c=JSON.parse(a);if("boolean"==typeof c)return c}catch(a){}throw new Error("Bad type: expect argument to be a boolean.")},any:function any(a){try{return JSON.parse(a)}catch(a){}return a},uuid:function uuid(a){if(a.match(/[\da-f]{8}-[\da-f]{4}-4[\da-f]{3}-[89ab][\da-f]{3}-[\da-f]{12}/))return a;throw new Error("Bad type: expect argument to be an uuid.")}};exports.FORMATS=FORMATS;var currentArgs,Route=function(){function a(b,c){if(_classCallCheck(this,a),"string"!=typeof b)throw new Error("First parameter should be a string.");if("function"!=typeof c)throw new Error("Second parameter should be a function.");this.path=b,this.controller=c}return _createClass(a,[{key:"go",value:function go(b,c){var d="object"===_typeof(b)?b:{},e=this.createPath(Object.assign({},currentArgs,d));return c&&e===a.getBrowserRequest()?this.run(b):a.setBrowserRequest(e),this}},{key:"run",value:function run(a){return currentArgs=a||this.getArgs(),this.controller(currentArgs)}},{key:"getArgs",value:function getArgs(){var b=a.getRequestObject(),c=this.getRequestObject();if("*"===c[c.length-1]){if(b.length<c.length-1)return null;}else if(b.length!==c.length)return null;return c.reduce(function(a,c,d){var e=b[d];if(null===a)return null;if("*"===c)return a;if("string"==typeof c)return c===e?a:null;if("object"===_typeof(c)){var f=c.key,g=c.value,h=c.regexp,i=c.type,j="object"===_typeof(e)?e:{value:e},k=j.key,l=j.value;if(k){if(k===f)if(i)try{return a[f]=FORMATS[i](l),a}catch(a){return null}else{if(h)return h.test(l)?(a[f]=l,a):null;if(l)return a[f]=l,a}}else if(g)if(i)try{return a[g]=FORMATS[i](l),a}catch(a){return null}else{if(h)return h.test(l)?(a[g]=l,a):null;if(l)return a[g]=l,a}}return null},{})}},{key:"isMatch",value:function isMatch(){return null!==this.getArgs()}},{key:"createPath",value:function createPath(a){return"object"!==_typeof(a)&&(a={}),this.getRequestObject().map(function(b){if("string"==typeof b)return"*"===b?"":b;var c=b.key,d=b.value;if(""===c){if(void 0===a[d])throw new Error("Can't build this path, not enough arguments (expect \"".concat(d,"\" field)"));return a[d]}if(""===d)return c+":"+(void 0===a[c]?"":a[c]);try{return c+":"+JSON.stringify(FORMATS[d](a[c]))}catch(a){throw new Error("Can't build this path, bad formatting arguments (expect \"".concat(c,"\" field)"))}}).join("/")}},{key:"getRequestObject",value:function getRequestObject(){return this.path.split("/").map(function(a){var b=a.split(":");if(1<b.length){var e=b.shift(),f=b.join(":"),g=f.match(/([^(]+)\((.+)\)/);if(g){var c=g,d=_slicedToArray(c,3);return f=d[1],g=d[2],FORMATS[g]?{key:e,value:f,type:g}:{key:e,value:f,regexp:new RegExp(g)}}return""===e?{value:f}:FORMATS[f]?{key:e,type:f}:{key:e,regexp:new RegExp(f)}}return a})}}],[{key:"getBrowserRequest",value:function getBrowserRequest(){return window.location.hash.substr(1)}},{key:"setBrowserRequest",value:function setBrowserRequest(a){window.location.hash=a}},{key:"getRequestObject",value:function getRequestObject(b){return"string"!=typeof b&&(b=a.getBrowserRequest()),b?b.split("/").map(function(a){var b=a.split(":");if(1<b.length){var c=b.shift(),d=b.join(":");return{key:c,value:d}}return a}):[]}}]),a}();exports.Route=exports["default"]=Route;

},{}],10:[function(require,module,exports){
"use strict";var _route=_interopRequireDefault(require("./route"));Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}var ROUTERS=[],defaultController=null,launched=!1;window.r=ROUTERS;var Router=function(){function a(b,c){_classCallCheck(this,a),this.baseUrl=b||"",this.firstCall=c||null,this.routes=[],ROUTERS.push(this)}return _createClass(a,[{key:"add",value:function add(b,c){if("string"==typeof b&&"function"==typeof c&&(b=new _route["default"](this.baseUrl+b,c)),b instanceof _route["default"]&&(this.routes.push(b),launched)){var d=b.getArgs();d&&(this.callFirst(),b.go(d),a.current=b)}return b}},{key:"test",value:function test(){return this.routes.find(function(a){var b=a.getArgs();if(null!==b)return a})}},{key:"callFirst",value:function callFirst(){"function"==typeof this.firstCall&&(this.firstCall(),this.firstCall=null)}}],[{key:"setDefault",value:function setDefault(a){defaultController=a}},{key:"listenPopstate",value:function listenPopstate(){window.addEventListener("popstate",popstate),launched||popstate()}},{key:"getAll",value:function getAll(){var a=ROUTERS.map(function(a){return a.routes.map(function(a){return a.path})}).flat();return defaultController&&a.unshift("*"),a}}]),a}();exports["default"]=Router;function popstate(){launched=!0;var a,b;ROUTERS.forEach(function(c){a||(a=c.test(),b=c)}),a?(b.callFirst(),a.run(),Router.current=a):"function"==typeof defaultController&&defaultController()}

},{"./route":9}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJndWxwL3dpbmRvd2VkLmpzIiwiaW5kZXguanMiLCJsaWJzL2xheW91dC9jb21wb25lbnQuanMiLCJsaWJzL2xheW91dC9kZWZpbmUuanMiLCJsaWJzL2xheW91dC9wYWdlLmpzIiwibGlicy9sYXlvdXQvc2VjdGlvbi5qcyIsImxpYnMvcmVxdWVzdC9hamF4LmpzIiwibGlicy9yZXF1ZXN0L3Jlc291cmNlLmpzIiwibGlicy9yb3V0ZXIvcm91dGUuanMiLCJsaWJzL3JvdXRlci9yb3V0ZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7YUNBQSx1RCx3RUFDQSxNQUFNLENBQUMsT0FBUCxDQUFpQixpQjs7O3NtRENVakIsUUFBUyxDQUFBLElBQVQsQ0FBZSxDQUFmLENBQXFCLENBQ0MsVUFBaEIsUUFBTyxDQUFBLENBRFEsR0FFVyxVQUF4QixHQUFBLFFBQVEsQ0FBQyxVQUZJLENBR2YsQ0FBSSxFQUhXLENBS2YsTUFBTSxDQUFDLGdCQUFQLENBQXdCLE1BQXhCLENBQWdDLENBQWhDLENBTGUsQ0FRcEIsQ0FFRCxRQUFTLENBQUEsT0FBVCxDQUFrQixDQUFsQixDQUF3QixDQUNNLFVBQXhCLEdBQUEsUUFBUSxDQUFDLFVBRFMsRUFFcEIsaUJBQUssWUFBTCxFQUZvQixDQUdwQixtQkFBTyxjQUFQLEVBSG9CLENBSUEsVUFBaEIsUUFBTyxDQUFBLENBSlMsRUFLbEIsQ0FBSSxFQUxjLEVBUXBCLE1BQU0sQ0FBQyxnQkFBUCxDQUF3QixNQUF4QixDQUFnQyxVQUFNLENBQ3BDLGlCQUFLLFlBQUwsRUFEb0MsQ0FFcEMsbUJBQU8sY0FBUCxFQUZvQyxDQUdoQixVQUFoQixRQUFPLENBQUEsQ0FIeUIsRUFJbEMsQ0FBSSxFQUVQLENBTkQsQ0FRSCxDQUVELEdBQU0sQ0FBQSxPQUFPLENBQUcsQ0FDZCxTQUFTLENBQVQscUJBRGMsQ0FFZCxPQUFPLENBQVAsbUJBRmMsQ0FHZCxJ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Qyx1REFRd0IsQ0FDdkIsTUFBTSxDQUFDLGdCQUFQLENBQXdCLFVBQXhCLENBQW9DLFFBQXBDLENBRHVCLENBRWxCLFFBRmtCLEVBR3JCLFFBQVEsRUFFWCxDLHVDQVFnQixDQUNmLEdBQU0sQ0FBQSxDQUFJLENBQUcsT0FBTyxDQUFDLEdBQVIsQ0FBWSxTQUFDLENBQUQsQ0FBWSxDQUNuQyxNQUFPLENBQUEsQ0FBTSxDQUFDLE1BQVAsQ0FBYyxHQUFkLENBQWtCLFNBQUMsQ0FBRCxDQUFXLENBQ2xDLE1BQU8sQ0FBQSxDQUFLLENBQUMsSUFDZCxDQUZNLENBR1IsQ0FKWSxFQUlWLElBSlUsRUFBYixDQVFBLE1BSEksQ0FBQSxpQkFHSixFQUZFLENBQUksQ0FBQyxPQUFMLENBQWEsR0FBYixDQUVGLENBQU8sQ0FDUixDLG1DQVVILFFBQVMsQ0FBQSxRQUFULEVBQXFCLENBQ25CLFFBQVEsR0FEVyxDQUVuQixHQUFJLENBQUEsQ0FBSixDQUFXLENBQVgsQ0FDQSxPQUFPLENBQUMsT0FBUixDQUFnQixTQUFDLENBQUQsQ0FBWSxDQUNyQixDQURxQixHQUV4QixDQUFLLENBQUcsQ0FBTSxDQUFDLElBQVAsRUFGZ0IsQ0FHeEIsQ0FBSyxDQUFHLENBSGdCLENBSzNCLENBTEQsQ0FIbUIsQ0FTZixDQVRlLEVBVWpCLENBQUssQ0FBQyxTQUFOLEVBVmlCLENBV2pCLENBQUssQ0FBQyxHQUFOLEVBWGlCLENBWWpCLE1BQU0sQ0FBQyxPQUFQLENBQWlCLENBWkEsRUFjbUIsVUFBN0IsUUFBTyxDQUFBLGlCQWRHLEVBZWpCLGlCQUFpQixFQUVwQiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImltcG9ydCBBbW9uaXRlIGZyb20gXCIuLi9pbmRleFwiO1xud2luZG93LkFtb25pdGUgPSBBbW9uaXRlO1xuIiwiaW1wb3J0IENvbXBvbmVudCBmcm9tIFwiLi9saWJzL2xheW91dC9jb21wb25lbnRcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuL2xpYnMvbGF5b3V0L3NlY3Rpb25cIjtcbmltcG9ydCBQYWdlIGZyb20gXCIuL2xpYnMvbGF5b3V0L3BhZ2VcIjtcbmltcG9ydCB7IGRlZmluZSwgQ3VzdG9tSFRNTEVsZW1lbnQgfSBmcm9tIFwiLi9saWJzL2xheW91dC9kZWZpbmVcIjtcblxuaW1wb3J0IGFqYXggZnJvbSBcIi4vbGlicy9yZXF1ZXN0L2FqYXhcIjtcbmltcG9ydCBSZXNvdXJjZSBmcm9tIFwiLi9saWJzL3JlcXVlc3QvcmVzb3VyY2VcIjtcblxuaW1wb3J0IFJvdXRlciBmcm9tIFwiLi9saWJzL3JvdXRlci9yb3V0ZXJcIjtcbmltcG9ydCBSb3V0ZSBmcm9tIFwiLi9saWJzL3JvdXRlci9yb3V0ZVwiO1xuXG5mdW5jdGlvbiBpbml0ICh0aGVuKSB7XG4gIGlmICh0eXBlb2YgdGhlbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09IFwiY29tcGxldGVcIikge1xuICAgICAgdGhlbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgdGhlbik7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGluaXRBbGwgKHRoZW4pIHtcbiAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09IFwiY29tcGxldGVcIikge1xuICAgIFBhZ2Uuc2V0Q29udGFpbmVyKCk7XG4gICAgUm91dGVyLmxpc3RlblBvcHN0YXRlKCk7XG4gICAgaWYgKHR5cGVvZiB0aGVuID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHRoZW4oKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHtcbiAgICAgIFBhZ2Uuc2V0Q29udGFpbmVyKCk7XG4gICAgICBSb3V0ZXIubGlzdGVuUG9wc3RhdGUoKTtcbiAgICAgIGlmICh0eXBlb2YgdGhlbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRoZW4oKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5jb25zdCBBbW9uaXRlID0ge1xuICBDb21wb25lbnQsXG4gIFNlY3Rpb24sXG4gIFBhZ2UsXG4gIGRlZmluZSxcbiAgQ3VzdG9tSFRNTEVsZW1lbnQsXG5cbiAgYWpheCxcbiAgUmVzb3VyY2UsXG5cbiAgUm91dGVyLFxuICBSb3V0ZSxcblxuICBpbml0LFxuICBpbml0QWxsXG59O1xuXG5leHBvcnQge1xuICBDb21wb25lbnQsXG4gIFNlY3Rpb24sXG4gIFBhZ2UsXG4gIGRlZmluZSxcbiAgQ3VzdG9tSFRNTEVsZW1lbnQsXG5cbiAgYWpheCxcbiAgUmVzb3VyY2UsXG5cbiAgUm91dGVyLFxuICBSb3V0ZSxcblxuICBpbml0LFxuICBpbml0QWxsLFxuXG4gIEFtb25pdGUgYXMgZGVmYXVsdFxufTtcbiIsImZ1bmN0aW9uIGNvbnRhaW5lciAoZWwsIHNlbGYsIGFyZ3MpIHtcbiAgaWYgKGVsIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICByZXR1cm4gZWxcbiAgfVxuICBlbHNlIGlmICh0eXBlb2YgZWwgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gY29udGFpbmVyKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpLCBzZWxmLCBhcmdzKVxuICB9XG4gIGVsc2UgaWYgKHR5cGVvZiBlbCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgcmV0dXJuIGNvbnRhaW5lcihlbC5hcHBseShzZWxmLCBhcmdzKSwgc2VsZiwgYXJncylcbiAgfVxuICBlbHNlIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbmZ1bmN0aW9uIHRlbXBsYXRlIChlbCwgc2VsZiwgYXJncykge1xuICBpZiAoZWwgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgIHJldHVybiBlbFxuICB9XG4gIGVsc2UgaWYgKHR5cGVvZiBlbCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgcmV0dXJuIHRlbXBsYXRlKGVsLmFwcGx5KHNlbGYsIGFyZ3MpLCBzZWxmLCBhcmdzKVxuICB9XG4gIGVsc2Uge1xuICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIilcbiAgICBkaXYuc2V0QXR0cmlidXRlKFwiY29tcG9uZW50XCIsIHNlbGYuY29uc3RydWN0b3IubmFtZSlcbiAgICBpZiAodHlwZW9mIGVsID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBkaXYuaW5uZXJIVE1MID0gZWxcbiAgICB9XG4gICAgcmV0dXJuIGRpdlxuICB9XG59XG5cbmZ1bmN0aW9uIGVsZW1lbnRzIChlbCwgc2VsZiwgYXJncykge1xuICBjb25zdCBpbnRvID0gc2VsZi50ZW1wbGF0ZVxuICBpZiAodHlwZW9mIGVsID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICByZXR1cm4gZWxlbWVudHMoZWwuYXBwbHkoc2VsZiwgYXJncyksIHNlbGYsIGFyZ3MpXG4gIH1cbiAgZWxzZSBpZiAoKHR5cGVvZiBlbCA9PT0gXCJvYmplY3RcIikgJiYgKChpbnRvKSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSkge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9XG4gICAgT2JqZWN0LmtleXMoZWwpLmZvckVhY2goKG5hbWUpID0+IHtcbiAgICAgIGlmIChlbFtuYW1lXSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHJlc3VsdFtuYW1lXSA9IFtlbFtuYW1lXV1cbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgZWxbbmFtZV0gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmVzdWx0W25hbWVdID0gWy4uLmludG8ucXVlcnlTZWxlY3RvckFsbChlbFtuYW1lXSldXG4gICAgICB9XG4gICAgICBlbHNlIGlmIChlbFtuYW1lXSAmJiBlbFtuYW1lXS5mb3JFYWNoKSB7XG4gICAgICAgIHJlc3VsdFtuYW1lXSA9IGVsW25hbWVdXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cbiAgZWxzZSB7XG4gICAgcmV0dXJuIHt9XG4gIH1cbn1cblxuZnVuY3Rpb24gZXZlbnRzIChlbCwgc2VsZiwgYXJncykge1xuICBpZiAodHlwZW9mIGVsID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICByZXR1cm4gZXZlbnRzKGVsLmFwcGx5KHNlbGYsIGFyZ3MpLCBzZWxmLCBhcmdzKVxuICB9XG4gIGVsc2UgaWYgKHR5cGVvZiBlbCA9PT0gXCJvYmplY3RcIikge1xuICAgIE9iamVjdC5rZXlzKGVsKS5mb3JFYWNoKChwYWlyKSA9PiB7XG4gICAgICBjb25zdCBzcGxpdCA9IHBhaXIuc3BsaXQoXCIgXCIpXG4gICAgICBpZiAoKHR5cGVvZiBlbFtwYWlyXSA9PT0gXCJzdHJpbmdcIikgJiYgKHNwbGl0Lmxlbmd0aCA+IDEpKSB7XG4gICAgICAgIGNvbnN0IGV2cyA9IHNwbGl0LnBvcCgpXG4gICAgICAgIGNvbnN0IHNlbGVjdG9ycyA9IHNwbGl0LmpvaW4oXCIgXCIpXG4gICAgICAgIGVsW3BhaXJdLnNwbGl0KFwiLFwiKS5mb3JFYWNoKChtZXRob2QpID0+IHtcbiAgICAgICAgICBldnMuc3BsaXQoXCIsXCIpLmZvckVhY2goKGV2ZW50TmFtZSkgPT4ge1xuICAgICAgICAgICAgc2VsZWN0b3JzLnNwbGl0KFwiLFwiKS5mb3JFYWNoKChzZWxlY3RvcikgPT4ge1xuICAgICAgICAgICAgICBsZXQgbm9kZVxuICAgICAgICAgICAgICBjb25zdCBmbiA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBzZWxmW21ldGhvZF0uYXBwbHkoc2VsZiwgYXJndW1lbnRzKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChldmVudE5hbWUgJiYgKHR5cGVvZiBzZWxmW21ldGhvZF0gPT09IFwiZnVuY3Rpb25cIikpIHtcbiAgICAgICAgICAgICAgICBpZiAoKG5vZGUgPSBzZWxmLmVsZW1lbnRzW3NlbGVjdG9yXSkgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgZm4pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5vZGUgJiYgbm9kZS5mb3JFYWNoKSB7XG4gICAgICAgICAgICAgICAgICBub2RlLmZvckVhY2goKG4pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbi5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgZm4pXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChzZWxmLnRlbXBsYXRlICYmIChub2RlID0gc2VsZi50ZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKSkpIHtcbiAgICAgICAgICAgICAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGZuKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAodHlwZW9mIGVsW3BhaXJdID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdG9ycyA9IHNwbGl0LmpvaW4oXCIgXCIpXG4gICAgICAgIE9iamVjdC5rZXlzKGVsW3BhaXJdKS5mb3JFYWNoKChldnMpID0+IHtcbiAgICAgICAgICBjb25zdCBtZXRob2QgPSBlbFtwYWlyXVtldnNdXG4gICAgICAgICAgaWYgKHR5cGVvZiBtZXRob2QgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIGV2cy5zcGxpdChcIixcIikuZm9yRWFjaCgoZXZlbnROYW1lKSA9PiB7XG4gICAgICAgICAgICAgIHNlbGVjdG9ycy5zcGxpdChcIixcIikuZm9yRWFjaCgoc2VsZWN0b3IpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgbm9kZVxuICAgICAgICAgICAgICAgIGNvbnN0IGZuID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgY29uc3QgX2FyZ3MgPSBbLi4uYXJndW1lbnRzXVxuICAgICAgICAgICAgICAgICAgX2FyZ3MudW5zaGlmdCh0aGlzKVxuICAgICAgICAgICAgICAgICAgc2VsZlttZXRob2RdLmFwcGx5KHNlbGYsIF9hcmdzKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZXZlbnROYW1lICYmICh0eXBlb2Ygc2VsZlttZXRob2RdID09PSBcImZ1bmN0aW9uXCIpKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoKG5vZGUgPSBzZWxmLmVsZW1lbnRzW3NlbGVjdG9yXSkgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBmbilcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5vZGUgJiYgbm9kZS5mb3JFYWNoKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuZm9yRWFjaCgobikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIG4uYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGZuKVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc2VsZi50ZW1wbGF0ZSAmJiAobm9kZSA9IHNlbGYudGVtcGxhdGUucXVlcnlTZWxlY3RvcihzZWxlY3RvcikpKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGZuKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG4gIH1cbn1cblxuXG4vKipcbiAqICBAY2xhc3MgPENvbXBvbmVudD4gaXMgdXNlZCB0byBidWlsZCBET00gZWxlbWVudHMsIGdlbmVyYXRpbmcgZGF0YSwgdGVtcGxhdGUgJiBldmVudHMuXG4gKiAgICBBIGNvbXBvbmVudCBjYW4gY29udGFpbiBvdGhlciBjb21wb25lbnRzLlxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbXBvbmVudCB7XG5cbiAgLyoqXG4gICAqIEBtZXRob2QgPGNvbnN0cnVjdG9yPiBidWlsZCB0aGlzIG9iamVjdFxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fFN0cmluZ3xGdW5jdGlvbn0gY29udGFpbmVyIHdpbGwgY29udGFpbiB0aGlzIGNvbXBvbmVudFxuICAgKiBAcGFyYW0geyp9IGFyZ3VtZW50cy4uLiBhcmUgcGFzc2VkIGluIHRlbXBsYXRlLCBlbGVtZW50cyBhbmQgZXZlbnRzIGZ1bmN0aW9uc1xuICAgKiBAcmV0dXJuIHtDb21wb25lbnR9IHNlbGZcbiAgICovXG5cbiAgY29uc3RydWN0b3IgKCkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9idWlsZGVyXCIsIHtcbiAgICAgIFwiZW51bWVyYWJsZVwiOiBmYWxzZSxcbiAgICAgIFwiY29uZmlndXJhYmxlXCI6IGZhbHNlLFxuICAgICAgXCJ2YWx1ZVwiOiB7XG4gICAgICAgIHRlbXBsYXRlOiB0aGlzLnRlbXBsYXRlLFxuICAgICAgICBlbGVtZW50czogdGhpcy5lbGVtZW50cyxcbiAgICAgICAgZXZlbnRzOiB0aGlzLmV2ZW50c1xuICAgICAgfVxuICAgIH0pXG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJfX2V2ZW50c19fXCIsIHtcbiAgICAgIFwiZW51bWVyYWJsZVwiOiBmYWxzZSxcbiAgICAgIFwiY29uZmlndXJhYmxlXCI6IGZhbHNlLFxuICAgICAgXCJ2YWx1ZVwiOiB7fVxuICAgIH0pXG5cbiAgICB0aGlzLnNldFRlbXBsYXRlKC4uLltudWxsLCAuLi5hcmd1bWVudHNdKVxuICB9XG5cblxuICAvKipcbiAgICogQG1ldGhvZCA8c2V0VGVtcGxhdGU+IGJ1aWxkIHRoZSBET00gb2YgdGhpcyBDb21wb25lbnQsIHRoZW4gbGlzdCBlbGVtZW50cyxcbiAgICogICAgZmluYWxseSBsaW5rIGVsZW1lbnRzIHdpdGggZXZlbnRzIGZ1bmN0aW9uc1xuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fEZ1bmN0aW9ufFN0cmluZ30gZG9tIGlzIHRoZSBIVE1MIG9mIHRoaXMgY29tcG9uZW50XG4gICAqIEBwYXJhbSB7Kn0gYXJndW1lbnRzLi4uIGFyZSBwYXNzZWQgaW4gdGVtcGxhdGUsIGVsZW1lbnRzIGFuZCBldmVudHMgZnVuY3Rpb25zXG4gICAqIEByZXR1cm4ge0NvbXBvbmVudH0gc2VsZlxuICAgKi9cblxuICBzZXRUZW1wbGF0ZSAoKSB7XG4gICAgY29uc3QgW2RvbSwgLi4uYXJnc10gPSBbLi4uYXJndW1lbnRzXSxcbiAgICAgIHRwbCA9IHRlbXBsYXRlKGRvbSB8fCB0aGlzLl9idWlsZGVyLnRlbXBsYXRlLCB0aGlzLCBhcmdzKVxuICAgIGlmICh0cGwgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgdGhpcy50ZW1wbGF0ZSA9IHRwbFxuICAgICAgdGhpcy5lbGVtZW50cyA9IGVsZW1lbnRzKHRoaXMuX2J1aWxkZXIuZWxlbWVudHMsIHRoaXMsIGFyZ3MpXG4gICAgICBldmVudHModGhpcy5fYnVpbGRlci5ldmVudHMsIHRoaXMsIGFyZ3MpXG4gICAgfVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuXG4gIC8qKlxuICAgKiBAbWV0aG9kIDxzZXRDb250YWluZXI+IHNldCBmaXJzdCBwYXJhbWV0ZXIgYXMgcGFyZW50IG9mIHRoaXMgY29tcG9uZW50XG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR8U3RyaW5nfEZ1bmN0aW9ufSBlbGVtZW50IHdpbGwgY29udGFpbiB0aGlzIGNvbXBvbmVudFxuICAgKiBAcGFyYW0geyp9IGFyZ3VtZW50cy4uLiBhcmUgcGFzc2VkIGluIHRlbXBsYXRlLCBlbGVtZW50cyBhbmQgZXZlbnRzIGZ1bmN0aW9uc1xuICAgKiBAcmV0dXJuIHtDb21wb25lbnR9IHNlbGZcbiAgICovXG5cbiAgc2V0Q29udGFpbmVyIChlbGVtZW50KSB7XG4gICAgY29uc3QgY29udCA9IGNvbnRhaW5lcihlbGVtZW50LCB0aGlzLCBhcmd1bWVudHMpXG4gICAgaWYgKGNvbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgdGhpcy5jb250YWluZXIgPSBjb250XG4gICAgICBpZiAodGhpcy50ZW1wbGF0ZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMudGVtcGxhdGUpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuXG4gIC8vIENISUxEIENPTVBPTkVOVFMgTUFOQUdFUlxuXG4gIC8qKlxuICAgKiBAbWV0aG9kIDxjbGVhckVsZW1lbnQ+IGNsZWFyIGFuIEhUTUwgZWxlbWVudCBvZiB0aGlzIENvbXBvbmVudFxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBpcyB0aGUgbmFtZSBvZiB0aGUgSFRNTCBlbGVtZW50XG4gICAqIEByZXR1cm4ge0NvbXBvbmVudH0gc2VsZlxuICAgKiBAdGhyb3dzIHtFcnJvcn0gaWYgdGhlIG5hbWUgZG9lcyBub3QgbWF0Y2ggYW4gZWxlbWVudFxuICAgKi9cblxuICBjbGVhckVsZW1lbnQgKG5hbWUpIHtcbiAgICBsZXQgZWxlbWVudFxuICAgIGlmICh0aGlzLmVsZW1lbnRzW25hbWVdICYmIChbZWxlbWVudF0gPSB0aGlzLmVsZW1lbnRzW25hbWVdKSkge1xuICAgICAgd2hpbGUgKGVsZW1lbnQuZmlyc3RDaGlsZClcbiAgICAgICAgZWxlbWVudC5yZW1vdmVDaGlsZChlbGVtZW50LmZpcnN0Q2hpbGQpXG4gICAgICByZXR1cm4gdGhpc1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRWxlbWVudCBcIiR7bmFtZX1cIiBpcyBub3QgYW4gZWxlbWVudCBvZiB0aGlzIGNvbXBvbmVudGApXG4gICAgfVxuICB9XG5cblxuICAvKipcbiAgICogQG1ldGhvZCA8YXBwZW5kQ29tcG9uZW50PiBhcHBlbmQgYSBDb21wb25lbnQgaW4gdGhpcyBDb21wb25lbnQgSFRNTCBlbGVtZW50XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIGlzIHRoZSBuYW1lIG9mIHRoZSBIVE1MIGVsZW1lbnRcbiAgICogQHBhcmFtIHtDb21wb25lbnR9IGNvbXBvbmVudCBpcyB0aGUgQ29tcG9uZW50IHRvIGFwcGVuZCBpbiB0aGUgSFRNTCBlbGVtZW50XG4gICAqIEByZXR1cm4ge0NvbXBvbmVudH0gc2VsZlxuICAgKiBAdGhyb3dzIHtFcnJvcn0gaWYgdGhlIG5hbWUgZG9lcyBub3QgbWF0Y2ggYW4gZWxlbWVudCBvciBpZiB0aGUgY29tcG9uZW50XG4gICAqICAgIGlzIG5vdCBhIENvbXBvbmVudCBpbnN0YW5jZS5cbiAgICovXG5cbiAgYXBwZW5kQ29tcG9uZW50IChuYW1lLCBjb21wb25lbnQpIHtcbiAgICBsZXQgZWxlbWVudFxuICAgIGlmICh0aGlzLmVsZW1lbnRzW25hbWVdICYmIChbZWxlbWVudF0gPSB0aGlzLmVsZW1lbnRzW25hbWVdKSkge1xuICAgICAgaWYgKGNvbXBvbmVudCBpbnN0YW5jZW9mIENvbXBvbmVudCkge1xuICAgICAgICBjb21wb25lbnQuc2V0Q29udGFpbmVyKGVsZW1lbnQpXG4gICAgICAgIHJldHVybiB0aGlzXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2Vjb25kIHBhcmFtZXRlciBpcyBub3QgYSBDb21wb25lbnQgb2JqZWN0XCIpXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBFbGVtZW50IFwiJHtuYW1lfVwiIGlzIG5vdCBhbiBlbGVtZW50IG9mIHRoaXMgY29tcG9uZW50YClcbiAgICB9XG4gIH1cblxuXG4gIC8qKlxuICAgKiBAbWV0aG9kIDxmaWxsQ29tcG9uZW50PiBzZXQgY29tcG9uZW50IGFzIG9ubHkgY2hpbGQgb2YgSFRNTCBlbGVtZW50IG9mIHRoaXNcbiAgICogICAgYnkgY2xlYXJpbmcgdGhlbiBhcHBlbmRpbmcgQ29tcG9uZW50LlxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBpcyB0aGUgbmFtZSBvZiB0aGUgSFRNTCBlbGVtZW50XG4gICAqIEBwYXJhbSB7Q29tcG9uZW50fSBjb21wb25lbnQgaXMgdGhlIENvbXBvbmVudCB0byBhcHBlbmQgaW4gdGhlIEhUTUwgZWxlbWVudFxuICAgKiBAcmV0dXJuIHtDb21wb25lbnR9IHNlbGZcbiAgICogQHRocm93cyB7RXJyb3J9IGlmIHRoZSBuYW1lIGRvZXMgbm90IG1hdGNoIGFuIGVsZW1lbnQgb3IgaWYgdGhlIGNvbXBvbmVudFxuICAgKiAgICBpcyBub3QgYSBDb21wb25lbnQgaW5zdGFuY2UuXG4gICAqL1xuXG4gIGZpbGxDb21wb25lbnQgKG5hbWUsIGNvbXBvbmVudCkge1xuICAgIHJldHVybiB0aGlzLmNsZWFyRWxlbWVudChuYW1lKS5hcHBlbmRDb21wb25lbnQobmFtZSwgY29tcG9uZW50KVxuICB9XG5cblxuICAvLyBURU1QTEFURSBCVUlMREVSU1xuXG4gIC8qKlxuICAgKiBAbWV0aG9kIDx0ZW1wbGF0ZT4gc2hvdWxkIGJlIG92ZXJyaWRlbiBhbmQgc2hvdWxkIHJldHVybiB0ZXh0IGluIEhUTUxcbiAgICogICAgZm9ybWF0IG9yIGFuIEhUTUxFbGVtZW50LlxuICAgKiBAcGFyYW0geyp9IGFyZ3VtZW50cy4uLiBhcmUgdHJhbnNmZXJlZCBmcm9tIDxjb25zdHJ1Y3Rvcj5cbiAgICogQHJldHVybiB7U3RyaW5nfEhUTUxFbGVtZW50fGZ1bmN0aW9ufVxuICAgKi9cblxuICB0ZW1wbGF0ZSAoKSB7XG4gICAgcmV0dXJuIFwiXCJcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEBtZXRob2QgPGVsZW1lbnRzPiBzaG91bGQgYmUgb3ZlcnJpZGVuIGFuZCBzaG91bGQgcmV0dXJuIG9iamVjdCB3aGVyZSBrZXlzXG4gICAqICAgIGFyZSB0aGUgbmFtZSwgYW5kIHRoZSB2YWx1ZXMgYXJlIHRoZSBzZWxlY3RvciBpbiB0aGlzIGNvbXBvbmVudCAobm90XG4gICAqICAgIGl0cyBjaGlsZHJlbiEpLlxuICAgKiBAcGFyYW0geyp9IGFyZ3VtZW50cy4uLiBhcmUgdHJhbnNmZXJlZCBmcm9tIDxjb25zdHJ1Y3Rvcj5cbiAgICogQHJldHVybiB7T2JqZWN0fGZ1bmN0aW9ufVxuICAgKiBAd2FybiB0aGlzIGZ1bmN0aW9uIGRvZXMgbm90IHNlbGVjdCBjaGlsZCBjb21wb25lbnRzIGVsZW1lbnRzLlxuICAgKi9cblxuICBlbGVtZW50cyAoKSB7XG4gICAgcmV0dXJuIHt9XG4gIH1cblxuXG4gIC8qKlxuICAgKiBAbWV0aG9kIDxlbGVtZW50cz4gc2hvdWxkIGJlIG92ZXJyaWRlbiBhbmQgc2hvdWxkIHJldHVybiBvYmplY3Qgd2hlcmUga2V5c1xuICAgKiAgICBhcmUgdGhlIG5hbWUgc3BhY2VkIHdpdGggZXZlbnQsIGFuZCB0aGUgdmFsdWVzIGFyZSB0aGUgY29tcG9uZW50IG1ldGhvZHNcbiAgICogICAgdG8gY2FsbCB3aGVuIGV2ZW50IGlzIHRyaWdnZXJlZCAobm90IGl0cyBjaGlsZHJlbiEpLlxuICAgKiBAcGFyYW0geyp9IGFyZ3VtZW50cy4uLiBhcmUgdHJhbnNmZXJlZCBmcm9tIDxjb25zdHJ1Y3Rvcj5cbiAgICogQHJldHVybiB7T2JqZWN0fGZ1bmN0aW9ufVxuICAgKi9cblxuICBldmVudHMgKCkge1xuICAgIHJldHVybiB7fVxuICB9XG5cblxuICAvLyBFWFRFUk5BTCBFVkVOVFNcblxuICAvKipcbiAgICogQG1ldGhvZCA8bGlzdGVuPiBsaXN0ZW4gYW4gZXZlbnQgJHtldmVudE5hbWV9IGhhcHBlbmluZyBhbmQgcmVnaXN0ZXIgdGhlXG4gICAqICAgIGZ1bmN0aW9uICR7Zm59IHRvIGV4ZWN1dGUgaXQgd2hlbiBldmVudCBoYXBwZW4uXG4gICAqIEBwYXJhbSB7c3RyaW5nfEFycmF5fSBldmVudE5hbWVcbiAgICogQHBhcmFtIHtmdW5jdGlvbnxBcnJheX0gZm5cbiAgICogQHJldHVybiB7Q29tcG9uZW50fSBzZWxmXG4gICAqL1xuXG4gIGxpc3RlbiAoZXZlbnROYW1lLCBmbikge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzXG4gICAgaWYgKHR5cGVvZiBldmVudE5hbWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGNvbnN0IHQgPSBldmVudE5hbWUuc3BsaXQoL1tcXG5cXHMsXSsvZylcbiAgICAgIGlmICh0Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuKFsuLi50XSwgZm4pXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZXZlbnROYW1lKSkge1xuICAgICAgZXZlbnROYW1lLmZvckVhY2goKGV2KSA9PiB7XG4gICAgICAgIHNlbGYubGlzdGVuKGV2LCBmbilcbiAgICAgIH0pXG4gICAgICByZXR1cm4gdGhpc1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShmbikpIHtcbiAgICAgIGZuLmZvckVhY2goKGYpID0+IHtcbiAgICAgICAgc2VsZi5saXN0ZW4oZXZlbnROYW1lLCBmKVxuICAgICAgfSlcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBmbiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBjb25zdCBldnMgPSB0aGlzW1wiX19ldmVudHNfX1wiXVxuICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGV2c1tldmVudE5hbWVdKSkge1xuICAgICAgICBldnNbZXZlbnROYW1lXSA9IFtdXG4gICAgICB9XG4gICAgICBldnNbZXZlbnROYW1lXS5wdXNoKGZuKVxuICAgIH1cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cblxuICAvKipcbiAgICogQG1ldGhvZCA8ZGlzcGF0Y2g+IHRyaWdnZXIgYW4gZXZlbnQgJHtldmVudE5hbWV9IGhhcHBlbmluZyBhbmQgZXhlY3V0ZSB0aGVcbiAgICogICAgcmVnaXN0ZXJlZCBmdW5jdGlvbnMuXG4gICAqIEBwYXJhbSB7c3RyaW5nfEFycmF5fSBldmVudE5hbWVcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gYXJnc1xuICAgKiBAcmV0dXJuIHtDb21wb25lbnR9IHNlbGZcbiAgICovXG5cbiAgZGlzcGF0Y2ggKGV2ZW50TmFtZSwgYXJncykge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzXG4gICAgaWYgKHR5cGVvZiBldmVudE5hbWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGNvbnN0IHQgPSBldmVudE5hbWUuc3BsaXQoL1tcXG5cXHMsXSsvZylcbiAgICAgIGlmICh0Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuKFsuLi50XSwgYXJncylcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShldmVudE5hbWUpKSB7XG4gICAgICBldmVudE5hbWUuZm9yRWFjaCgoZXYpID0+IHtcbiAgICAgICAgc2VsZi5saXN0ZW4oZXYsIGFyZ3MpXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG5cbiAgICBjb25zdCBldnMgPSB0aGlzW1wiX19ldmVudHNfX1wiXVxuICAgIGlmICghQXJyYXkuaXNBcnJheShldnNbZXZlbnROYW1lXSkpIHtcbiAgICAgIGV2c1tldmVudE5hbWVdID0gW11cbiAgICB9XG4gICAgZXZzW2V2ZW50TmFtZV0uZm9yRWFjaCgoZm4pID0+IHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGFyZ3MpKSB7XG4gICAgICAgIGZuLmFwcGx5KG51bGwsIGFyZ3MpXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgZm4oKVxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEBtZXRob2QgPGRldGFjaD4gcmVtb3ZlIHRoZSByZWdpc3RlcmVkIGZ1bmN0aW9uICR7Zm59IGxpc3RlbmVkIGJ5IGV2ZW50XG4gICAqICAgICR7ZXZlbnROYW1lfSwgb3IgYWxsIG9mIGl0cyBmdW5jdGlvbnMgaWYgJHtmbn0gaXMgdW5kZWZpbmVkXG4gICAqIEBwYXJhbSB7c3RyaW5nfEFycmF5fSBldmVudE5hbWVcbiAgICogQHBhcmFtIHtmdW5jdGlvbnxBcnJheX0gZm5cbiAgICogQHJldHVybiB7Q29tcG9uZW50fSBzZWxmXG4gICAqL1xuXG4gIGRldGFjaCAoZXZlbnROYW1lLCBmbikge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzXG4gICAgaWYgKHR5cGVvZiBldmVudE5hbWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGNvbnN0IHQgPSBldmVudE5hbWUuc3BsaXQoL1tcXG5cXHMsXSsvZylcbiAgICAgIGlmICh0Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuKFsuLi50XSwgZm4pXG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZXZlbnROYW1lKSkge1xuICAgICAgZXZlbnROYW1lLmZvckVhY2goKGV2KSA9PiB7XG4gICAgICAgIHNlbGYubGlzdGVuKGV2LCBmbilcbiAgICAgIH0pXG4gICAgICByZXR1cm4gdGhpc1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShmbikpIHtcbiAgICAgIGZuLmZvckVhY2goKGYpID0+IHtcbiAgICAgICAgc2VsZi5saXN0ZW4oZXZlbnROYW1lLCBmKVxuICAgICAgfSlcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuXG4gICAgY29uc3QgZXZzID0gdGhpc1tcIl9fZXZlbnRzX19cIl1cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZXZzW2V2ZW50TmFtZV0pKSB7XG4gICAgICBldnNbZXZlbnROYW1lXSA9IFtdXG4gICAgfVxuICAgIGlmIChmbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBldnNbZXZlbnROYW1lXSA9IFtdXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgZXZzW2V2ZW50TmFtZV0gPSBldnNbZXZlbnROYW1lXS5zbGljZShldnNbZXZlbnROYW1lXS5pbmRleE9mKGZuKSlcbiAgICB9XG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEBtZXRob2QgPGxpc3Rlbk9uY2U+IGxpc3RlbiBldmVudCAke2V2ZW50TmFtZX0gaGFwcGVuaW5nIGZvciBleGVjdXRpbmdcbiAgICogICAgZnVuY3Rpb24gJHtmbn0gb25seSBvbmUgdGltZS5cbiAgICogQHBhcmFtIHtzdHJpbmd8QXJyYXl9IGV2ZW50TmFtZVxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufEFycmF5fSBmblxuICAgKiBAcmV0dXJuIHtDb21wb25lbnR9IHNlbGZcbiAgICovXG5cbiAgbGlzdGVuT25jZSAoZXZlbnROYW1lLCBmbikge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzLFxuICAgICAgZGVsID0gKCkgPT4ge1xuICAgICAgICBzZWxmLmRldGFjaChldmVudE5hbWUsIGZuKVxuICAgICAgICBzZWxmLmRldGFjaChldmVudE5hbWUsIGRlbClcbiAgICAgIH1cbiAgICB0aGlzLmxpc3RlbihldmVudE5hbWUsIGZuKVxuICAgIHRoaXMubGlzdGVuKGV2ZW50TmFtZSwgZGVsKVxuICAgIHJldHVybiB0aGlzXG4gIH1cbn1cbiIsImZ1bmN0aW9uIGdldEN1c3RvbUNoaWxkcmVuIChub2RlKSB7XG4gIHJldHVybiBbLi4ubm9kZS5xdWVyeVNlbGVjdG9yQWxsKE9iamVjdC5rZXlzKERFRklORVMpLmpvaW4oXCIsXCIpLnRvVXBwZXJDYXNlKCkpXVxufVxuXG5mdW5jdGlvbiB0ZXN0IChub2RlKSB7XG4gIGNvbnN0IERlZiA9IERFRklORVNbbm9kZS5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpXVxuICBpZiAoREVGSU5FRC5pbmRleE9mKG5vZGUpICE9PSAtMSkge1xuICAgIHJldHVyblxuICB9XG4gIGVsc2UgaWYgKERlZikge1xuICAgIG5ldyBEZWYobm9kZSkgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1uZXdcbiAgICBjb25zdCBjaGlsZHJlbiA9IGdldEN1c3RvbUNoaWxkcmVuKG5vZGUpXG4gICAgaWYgKGNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHtcbiAgICAgICAgY2hpbGQuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4ge1xuICAgICAgICAgIGlmICghY2hpbGRyZW4uZmlsdGVyKChfY2hpbGQpID0+IHsgcmV0dXJuIERFRklORUQuaW5kZXhPZihfY2hpbGQpID09PSAtMSB9KS5sZW5ndGgpIHtcbiAgICAgICAgICAgIERFRklORUQucHVzaChub2RlKVxuICAgICAgICAgICAgbm9kZS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImxvYWRcIikpXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSlcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBERUZJTkVELnB1c2gobm9kZSlcbiAgICAgIG5vZGUuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJsb2FkXCIpKVxuICAgIH1cbiAgfVxuXG4gIGlmIChub2RlLmNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgbm9kZS5jaGlsZE5vZGVzLmZvckVhY2godGVzdClcbiAgfVxufVxuXG5mdW5jdGlvbiBvbmxvYWQgKCkge1xuICBjb25zdCBtbyA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnMpID0+IHtcbiAgICBtdXRhdGlvbnMuZm9yRWFjaCgobXV0YXRpb24pID0+IHtcbiAgICAgIG11dGF0aW9uLmFkZGVkTm9kZXMuZm9yRWFjaCh0ZXN0KVxuICAgIH0pXG4gIH0pXG5cbiAgY29uc3QgY25mID0ge1xuICAgIGF0dHJpYnV0ZXM6IHRydWUsXG4gICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgIGNoYXJhY3RlckRhdGE6IHRydWUsXG4gICAgc3VidHJlZTogdHJ1ZVxuICB9XG5cbiAgbW8ub2JzZXJ2ZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiaHRtbFwiKSwgY25mKVxufVxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgb25sb2FkKVxuaWYgKHdpbmRvdy5kb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImNvbXBsZXRlXCIpIHtcbiAgb25sb2FkKClcbn1cblxuXG5jb25zdCBERUZJTkVTID0ge31cbmNvbnN0IERFRklORUQgPSBbXVxuXG4vKipcbiAqIEBmdW5jdGlvbiA8ZGVmaW5lPiBydW4gYSBmdW5jdGlvbiAke2J1aWxkZXJ9IGVhY2ggJHtub2RlTmFtZX0gZmlyc3QgaW5zZXJ0aW9uXG4gKiAgICBpbiBjdXJyZW50IEhUTUwgRG9jdW1lbnQuXG4gKiBAcGFyYW0ge1N0cmluZ30gbm9kZU5hbWUgaXMgdGhlIG5vZGVOYW1lIG9mIHlvdXIgSFRNTEVsZW1lbnQsIHBsZWFzZSB1c2UgY29ycmVjdCBzcGVsbGluZ1xuICogQHBhcmFtIHtGdW5jdGlvbn0gYnVpbGRlciBpcyB0aGUgZnVuY3Rpb24gcnVuIHdoZW4gYW4gSFRNTEVsZW1lbnQgdGhhdCBtYXRjaFxuICogICAgbm9kZU5hbWUgaXMgaW5zZXJ0ZWQgaW4gY3VycmVudCBIVE1MIERvY3VtZW50L1xuICovXG5cbmZ1bmN0aW9uIGRlZmluZSAobm9kZU5hbWUsIGJ1aWxkZXIpIHtcbiAgaWYgKHR5cGVvZiBub2RlTmFtZSAhPT0gXCJzdHJpbmdcIilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJGaXJzdCBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nICh0byBzZWxlY3QgaXRlbXMgYnkgbm9kZSBuYW1lIGluIGRvbSB0cmVlKVwiKVxuICBpZiAodHlwZW9mIGJ1aWxkZXIgIT09IFwiZnVuY3Rpb25cIilcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJTZWNvbmQgcGFyYW1ldGVyIHNob3VsZCBiZSBhIGNsYXNzIG9yIGEgZnVuY3Rpb24gKHRvIGNvbnN0cnVjdCBpdGVtKVwiKVxuICBERUZJTkVTW25vZGVOYW1lLnRvVXBwZXJDYXNlKCldID0gYnVpbGRlcjtcbiAgWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwobm9kZU5hbWUudG9VcHBlckNhc2UoKSldLmZvckVhY2godGVzdClcbn1cblxuXG4vKipcbiAqIEBjbGFzcyA8Q3VzdG9tSFRNTEVsZW1lbnQ+IGlzIGFuIGFic3RyYWN0IGNsYXNzIGZvciBoZWxwaW5nIGRldlxuICovXG5cbmNsYXNzIEN1c3RvbUhUTUxFbGVtZW50IHtcbn1cblxuZXhwb3J0IHsgZGVmaW5lIGFzIGRlZmF1bHQsIGRlZmluZSwgQ3VzdG9tSFRNTEVsZW1lbnQgfVxuIiwiaW1wb3J0IENvbXBvbmVudCBmcm9tIFwiLi9jb21wb25lbnRcIlxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4vc2VjdGlvblwiXG5cbi8qKlxuICogQGNsYXNzIDxQYWdlPiBpcyBhIENvbXBvbmVudCB3aGljaCBpcyBzZXQgYXMgb25seSBjaGlsZCBvZiBEb2N1bWVudCBib2R5IGF0XG4gKiAgICB0aW1lLiBBIHNlY3Rpb24gaXMgZGVmaW5lZCB3aXRoIGEgUGFnZSwgc28gd2hlbiBhIHNlY3Rpb24gaXMgY2FsbGVkLCB0aGVcbiAqICAgIHBhZ2Ugd3JhcCB0aGUgb25seSBjaGlsZCBzZWN0aW9uIGluIHRoZSBwYWdlLiBJdCBzaW1wbGlmeSB0aGUgY29uc3RydWN0aW9uXG4gKiAgICBvZiB0aGUgRE9NLlxuICogQHdhcm4gUGFnZS5lbGVtZW50cyBzaG91bGQgY29udGFpbiBcInNlY3Rpb25cIiBlbGVtZW50XG4gKiBAYWR2aXNlIEEgc2luZ2xlIGNoaWxkIGNsYXNzIG9mIFBhZ2UgaW5zdGFuY2Ugc2hvdWxkIGV4aXN0cyBzbyBwbGVhc2VcbiAqICAgIGNhbGwgUGFnZS5nZXRQYWdlQnlDb25zdHJ1Y3RvcihwYWdlKSBpbiBzZWN0aW9uLlxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBhZ2UgZXh0ZW5kcyBDb21wb25lbnQge1xuXG4gIC8qKlxuICAgKiBAbWV0aG9kIDxjb25zdHJ1Y3Rvcj4gYXQgY29uc3RydWN0aW9uIG9mIHRoaXMgUGFnZSwgdGhlIHBhZ2UgZmlsbCB0aGVcbiAgICogICAgRG9jdW1lbnQgYm9keSBhcyBvbmx5IGNoaWxkLlxuICAgKiBAcmV0dXJuIHtQYWdlfSBzZWxmXG4gICAqL1xuXG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICBzdXBlcihQYWdlLmNvbnRhaW5lcilcbiAgICB0aGlzLnRlbXBsYXRlLnNldEF0dHJpYnV0ZShcInBhZ2VcIiwgdGhpcy50ZW1wbGF0ZS5nZXRBdHRyaWJ1dGUoXCJjb21wb25lbnRcIikpXG4gICAgdGhpcy50ZW1wbGF0ZS5yZW1vdmVBdHRyaWJ1dGUoXCJjb21wb25lbnRcIilcbiAgICBQYWdlLmluc3RhbmNlc1t0aGlzLmNvbnN0cnVjdG9yLm5hbWVdID0gdGhpc1xuICB9XG5cblxuICAvKipcbiAgICogQG1ldGhvZCA8c2V0U2VjdGlvbj4gZmlsbCB0aGlzIHBhZ2Ugd2l0aCBhIFNlY3Rpb25cbiAgICogQHBhcmFtIHtTZWN0aW9ufSBzZWN0aW9uXG4gICAqIEByZXR1cm4ge1BhZ2V9IHNlbGZcbiAgICovXG5cbiAgc2V0U2VjdGlvbiAoc2VjdGlvbikge1xuICAgIGlmIChzZWN0aW9uIGluc3RhbmNlb2YgU2VjdGlvbikge1xuICAgICAgdGhpcy5maWxsQ29tcG9uZW50KFwic2VjdGlvblwiLCBzZWN0aW9uKVxuICAgIH1cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cblxuICAvKipcbiAgICogQG1ldGhvZCA8c2V0UGFnZT4gc2V0IHRoaXMgcGFnZSBhcyBvbmx5IHBhZ2Ugd3JhcHBlciBvbiB0aGlzIERvY3VtZW50IGJvZHlcbiAgICogICAgYW5kIHNldCBhIHNlY3Rpb24gaWYgc2V0IGluIHBhcmFtZXRlci5cbiAgICogQHBhcmFtIHtTZWN0aW9ufSBzZWN0aW9uXG4gICAqL1xuXG4gIHNldFBhZ2UgKHNlY3Rpb24pIHtcbiAgICBpZiAoUGFnZS5wYWdlICE9PSB0aGlzKSB7XG4gICAgICBjb25zdCBpbnRvID0gUGFnZS5jb250YWluZXJcbiAgICAgIHdoaWxlIChpbnRvLmZpcnN0Q2hpbGQpXG4gICAgICAgIGludG8ucmVtb3ZlQ2hpbGQoaW50by5maXJzdENoaWxkKVxuICAgICAgdGhpcy5zZXRDb250YWluZXIoaW50bylcbiAgICAgIFBhZ2UucGFnZSA9IHRoaXNcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc2V0U2VjdGlvbihzZWN0aW9uKVxuICB9XG5cblxuICAvKipcbiAgICogQGZ1bmN0aW9uIDxzZXRDb250YWluZXI+IHNldCB0aGUgY29udGFpbmVyIHdoZXJlIGV2ZXJ5IHBhZ2VzIHNob3VsZCBiZVxuICAgKiAgICBmaWxsZWQgaW4uXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR8RnVuY3Rpb258U3RyaW5nfSBpbnRvXG4gICAqL1xuXG4gIHN0YXRpYyBzZXRDb250YWluZXIgKGludG8pIHtcbiAgICBpZiAodHlwZW9mIGludG8gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgcmV0dXJuIFBhZ2Uuc2V0Q29udGFpbmVyKGludG8oKSlcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBpbnRvID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBpbnRvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihpbnRvKVxuICAgIH1cbiAgICBpZiAoaW50byBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICBQYWdlLmNvbnRhaW5lciA9IGludG9cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBQYWdlLmNvbnRhaW5lciA9IFBhZ2UuY29udGFpbmVyIHx8IGRvY3VtZW50LmJvZHlcbiAgICB9XG5cbiAgICBpZiAoUGFnZS5wYWdlKSB7XG4gICAgICBQYWdlLnBhZ2Uuc2V0Q29udGFpbmVyKGludG8pXG4gICAgfVxuICB9XG5cblxuICAvKipcbiAgICogQGZ1bmN0aW9uIDxnZXRDdXJyZW50UGFnZT4gcmV0dXJucyBsYXN0IHBhZ2Ugc2V0IGluIGJvZHlcbiAgICogQHJldHVybiB7UGFnZX1cbiAgICovXG5cbiAgc3RhdGljIGdldEN1cnJlbnRQYWdlICgpIHtcbiAgICByZXR1cm4gUGFnZS5wYWdlXG4gIH1cblxuXG4gIC8qKlxuICAgKiBAZnVuY3Rpb24gPGdldFBhZ2VCeUNvbnN0cnVjdG9yPiByZXR1cm5zIGEgUGFnZSBpbnN0YW5jZSBvZiAke0NvbnN0cn0gaWYgaXRcbiAgICogICAgZXhpc3RzIG9yIGEgbmV3IGluc3RhbmNlLlxuICAgKiBAcGFyYW0ge1BhZ2V9IENvbnN0clxuICAgKiBAcmV0dXJuIHtQYWdlfVxuICAgKi9cblxuICBzdGF0aWMgZ2V0UGFnZUJ5Q29uc3RydWN0b3IgKENvbnN0cikge1xuICAgIGNvbnN0IGluc3QgPSBQYWdlLmluc3RhbmNlc1tDb25zdHIubmFtZV1cbiAgICBpZiAoaW5zdCBpbnN0YW5jZW9mIFBhZ2UpIHtcbiAgICAgIHJldHVybiBpbnN0XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBDb25zdHIoKVxuICAgIH1cbiAgfVxufVxuXG5QYWdlLmluc3RhbmNlcyA9IHt9XG5QYWdlLmNvbnRhaW5lciA9IG51bGxcbiIsImltcG9ydCBDb21wb25lbnQgZnJvbSBcIi4vY29tcG9uZW50XCJcbmltcG9ydCBQYWdlIGZyb20gXCIuL3BhZ2VcIlxuXG4vKipcbiAqIEBjbGFzcyA8U2VjdGlvbj4gaXMgYSBDb21wb25lbnQgd2hpY2ggc2hvdWxkIGJlIG9ubHkgY2hpbGQgb2YgYSBwYWdlICh3aGljaFxuICogICAgaXMgdGhlIG9ubHkgY2hpbGQgb2YgRG9jdW1lbnQgYm9keSkgYXQgdGltZS5cbiAqIEB3YXJuIFNlY3Rpb24ud3JhcHBlcigpIHNob3VsZCByZXR1cm4gYSBQYWdlIGNvbnN0cnVjdG9yLCBlbHNlIG5vdGhpbmcgaXNcbiAqICAgIGRpc3BsYXllZC5cbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIGV4dGVuZHMgQ29tcG9uZW50IHtcblxuXG4gIC8qKlxuICAgKiBAbWV0aG9kIDxjb25zdHJ1Y3Rvcj5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgaXMgdHJhbnNmZXJlZCB0byBTZWN0aW9uLnRlbXBsYXRlLCBTZWN0aW9uLmVsZW1lbnRzXG4gICAqICAgIGFuZCBTZWN0aW9uLmV2ZW50cy5cbiAgICogQHJldHVybiB7U2VjdGlvbn0gc2VsZlxuICAgKi9cblxuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgc3VwZXIoLi4uYXJndW1lbnRzKVxuICAgIHRoaXMudGVtcGxhdGUuc2V0QXR0cmlidXRlKFwic2VjdGlvblwiLCB0aGlzLnRlbXBsYXRlLmdldEF0dHJpYnV0ZShcImNvbXBvbmVudFwiKSlcbiAgICB0aGlzLnRlbXBsYXRlLnJlbW92ZUF0dHJpYnV0ZShcImNvbXBvbmVudFwiKVxuICB9XG5cblxuICAvKipcbiAgICogQG1ldGhvZCA8c2V0U2VjdGlvbj4gc2V0IHRoaXMgc2VjdGlvbiBpbiBEb2N1bWVudCBhcyBvbmx5IGNoaWxkIG9mIGEgUGFnZVxuICAgKiAgICBhbmQgUGFnZSBpbnN0YW5jZSBhcyBvbmx5IGNoaWxkIG9mIERvY3VtZW50IGJvZHkuXG4gICAqIEByZXR1cm4ge1NlY3Rpb259IHNlbGZcbiAgICovXG5cbiAgc2V0U2VjdGlvbiAoKSB7XG4gICAgY29uc3QgcGFnZSA9IHRoaXMuZ2V0V3JhcHBlcigpXG4gICAgaWYgKHBhZ2UpIHtcbiAgICAgIHBhZ2Uuc2V0UGFnZSh0aGlzKVxuICAgICAgdGhpcy5fYnVpbGRlci53cmFwcGVyID0gcGFnZVxuICAgIH1cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cblxuICAvKipcbiAgICogQG1ldGhvZCA8Z2V0V3JhcHBlcj4gcmV0dXJucyBzZWN0aW9uIHdyYXBwZXIgY29tcG9uZW50LCBhIFBhZ2UgaW5zdGFuY2VcbiAgICogQHJldHVybiB7UGFnZX0gYSBjb21wb25lbnQgd2hpY2ggd3JhcCB0aGlzIHNlY3Rpb25cbiAgICovXG5cbiAgZ2V0V3JhcHBlciAoKSB7XG4gICAgaWYgKCF0aGlzLl9idWlsZGVyLndyYXBwZXIpIHtcbiAgICAgIHRoaXMuX2J1aWxkZXIud3JhcHBlciA9IFBhZ2UuZ2V0UGFnZUJ5Q29uc3RydWN0b3IodGhpcy53cmFwcGVyKCkpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9idWlsZGVyLndyYXBwZXJcbiAgfVxuXG4gIC8qKlxuICAgKiBAbWV0aG9kIDx3cmFwcGVyPiBzaG91bGQgYmUgb3ZlcnJpZGVuIGFuZCBzaG91bGQgcmV0dXJuIGEgUGFnZSBjaGlsZCBjbGFzc1xuICAgKiAgICBjb25zdHJ1Y3Rvci5cbiAgICogQHJldHVybiB7UGFnZX0gd2hpY2ggd2lsbCB3cmFwIHRoaXMgc2VjdGlvblxuICAgKi9cblxuICB3cmFwcGVyICgpIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG4iLCIvKipcbiAqICBAZnVuY3Rpb24gPGFqYXg+IGV4ZWN1dGUgYSByZXF1ZXN0IHRvIHNlcnZlclxuICogIEBwYXJhbSB7c3RyaW5nfGZ1bmN0aW9ufG9iamVjdH0gbWV0aG9kIG9yIGJ1aWxkZXJcbiAqICBAcGFyYW0ge3N0cmluZ3xmdW5jdGlvbn0gdXJpIHRvIHJlc291cmNlXG4gKiAgQHBhcmFtIHtzdHJpbmd8ZnVuY3Rpb259IGRhdGEgdG8gc2VuZCBpbiByZXF1ZXN0IGJvZHlcbiAqICBAcGFyYW0ge2Z1bmN0aW9ufEFycmF5LjxmdW5jdGlvbj59IHN1Y2Nlc3MgZnVuY3Rpb25zXG4gKiAgQHBhcmFtIHtmdW5jdGlvbnxBcnJheS48ZnVuY3Rpb24+fSBmYWlsdXJlIGZ1bmN0aW9uc1xuICogIEBwYXJhbSB7b2JqZWN0fGZ1bmN0aW9ufSBoZWFkZXJzIHRvIHNlbmQgdG8gcmVxdWVzdCBoZWFkZXJzXG4gKiAgQHBhcmFtIHtzdHJpbmd8ZnVuY3Rpb259IG92ZXJyaWRlTWltZVR5cGUgdG8gZW5mb3JjZSByZXNwb25zZSByZWFkaW5nIGZvcm1hdFxuICogIEByZXR1cm4ge1Byb21pc2V9XG4gKi9cblxuZnVuY3Rpb24gYWpheCAoLi4uYXJncykge1xuICBjb25zdCBidWlsZGVyID0gYWpheFBhcmFtZXRlcnMuYXBwbHkobnVsbCwgYXJncylcblxuICBjb25zdCBwcm9tID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpXG5cbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRlbmRcIiwgKCkgPT4ge1xuICAgICAgcmVzb2x2ZSh4aHIpXG4gICAgfSlcbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsICgpID0+IHtcbiAgICAgIHJlamVjdCh4aHIpXG4gICAgfSlcblxuICAgIHhoci5vcGVuKGJ1aWxkZXIubWV0aG9kLCBidWlsZGVyLnVyaSlcblxuICAgIGlmICh0eXBlb2YgYnVpbGRlci5oZWFkZXJzID09PSBcIm9iamVjdFwiICYmIGJ1aWxkZXIuaGVhZGVycyAhPT0gbnVsbCkge1xuICAgICAgT2JqZWN0LmtleXMoYnVpbGRlci5oZWFkZXJzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgY29uc3Qgc3RyID0gdHJ5RXhlYyhidWlsZGVyLmhlYWRlcnNba2V5XSlcbiAgICAgICAgaWYgKHR5cGVvZiBzdHIgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihrZXksIHN0cilcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGJ1aWxkZXIub3ZlcnJpZGVNaW1lVHlwZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgeGhyLm92ZXJyaWRlTWltZVR5cGUoYnVpbGRlci5vdmVycmlkZU1pbWVUeXBlKVxuICAgIH1cblxuICAgIHhoci5zZW5kKGJ1aWxkZXIuZGF0YSlcbiAgfSlcblxuICBpZiAoQXJyYXkuaXNBcnJheShidWlsZGVyLnN1Y2Nlc3MpKSB7XG4gICAgYnVpbGRlci5zdWNjZXNzLmZvckVhY2goKGZuKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGZuID09PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgIHByb20udGhlbihmbilcbiAgICB9KVxuICB9XG4gIGlmICh0eXBlb2YgYnVpbGRlci5zdWNjZXNzID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBwcm9tLnRoZW4oYnVpbGRlci5zdWNjZXNzKVxuICB9XG5cbiAgaWYgKEFycmF5LmlzQXJyYXkoYnVpbGRlci5mYWlsdXJlKSkge1xuICAgIGJ1aWxkZXIuZmFpbHVyZS5mb3JFYWNoKChmbikgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBmbiA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgICBwcm9tLmNhdGNoKGZuKVxuICAgIH0pXG4gIH1cbiAgaWYgKHR5cGVvZiBidWlsZGVyLmZhaWx1cmUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHByb20uY2F0Y2goYnVpbGRlci5mYWlsdXJlKVxuICB9XG5cbiAgcmV0dXJuIHByb21cbn1cblxuXG4vKipcbiAqICBAZnVuY3Rpb24gPGFqYXhQYXJhbWV0ZXJzPiBleGVjdXRlIHBhcmFtZXRlcnMgYW5kIHJldHVybnMgaW4gZ29vZCBmb3JtYXRcbiAqICBAcGFyYW0ge3N0cmluZ3xmdW5jdGlvbnxvYmplY3R9IG1ldGhvZCBvciBidWlsZGVyXG4gKiAgQHBhcmFtIHtzdHJpbmd8ZnVuY3Rpb259IHVyaSB0byByZXNvdXJjZVxuICogIEBwYXJhbSB7c3RyaW5nfGZ1bmN0aW9ufSBkYXRhIHRvIHNlbmQgaW4gcmVxdWVzdCBib2R5XG4gKiAgQHBhcmFtIHtmdW5jdGlvbnxBcnJheS48ZnVuY3Rpb24+fSBzdWNjZXNzIGZ1bmN0aW9uc1xuICogIEBwYXJhbSB7ZnVuY3Rpb258QXJyYXkuPGZ1bmN0aW9uPn0gZmFpbHVyZSBmdW5jdGlvbnNcbiAqICBAcGFyYW0ge29iamVjdHxmdW5jdGlvbn0gaGVhZGVycyB0byBzZW5kIHRvIHJlcXVlc3QgaGVhZGVyc1xuICogIEBwYXJhbSB7c3RyaW5nfGZ1bmN0aW9ufSBvdmVycmlkZU1pbWVUeXBlIHRvIGVuZm9yY2UgcmVzcG9uc2UgcmVhZGluZyBmb3JtYXRcbiAqICBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxuZnVuY3Rpb24gYWpheFBhcmFtZXRlcnMgKG1ldGhvZCwgdXJpLCBkYXRhLCBzdWNjZXNzLCBmYWlsdXJlLCBoZWFkZXJzLCBvdmVycmlkZU1pbWVUeXBlKSB7XG4gIGlmICh0eXBlb2YgbWV0aG9kID09PSBcIm9iamVjdFwiKSB7XG4gICAgcmV0dXJuIGFqYXhQYXJhbWV0ZXJzKFxuICAgICAgbWV0aG9kLm1ldGhvZCxcbiAgICAgIG1ldGhvZC51cmkgfHwgbWV0aG9kLnVybCB8fCBtZXRob2QuZmlsZSB8fCBtZXRob2Quc291cmNlLFxuICAgICAgbWV0aG9kLmRhdGEgfHwgbWV0aG9kLmJvZHkgfHwgbWV0aG9kLnBvc3QsXG4gICAgICBtZXRob2Quc3VjY2VzcyB8fCBtZXRob2QubG9hZCxcbiAgICAgIG1ldGhvZC5mYWlsdXJlIHx8IG1ldGhvZC5lcnJvcixcbiAgICAgIG1ldGhvZC5oZWFkZXJzLFxuICAgICAgbWV0aG9kLm92ZXJyaWRlTWltZVR5cGVcbiAgICApXG4gIH1cbiAgZWxzZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1ldGhvZDogdHJ5RXhlYy5jYWxsKHRoaXMsIG1ldGhvZCwgXCJHRVRcIiwgYXJndW1lbnRzKSxcbiAgICAgIHVyaTogdHJ5RXhlYy5jYWxsKHRoaXMsIHVyaSwgXCJcIiwgYXJndW1lbnRzKSxcbiAgICAgIGRhdGE6IHRyeUV4ZWMuY2FsbCh0aGlzLCBkYXRhLCBudWxsLCBhcmd1bWVudHMpLFxuICAgICAgc3VjY2VzcyxcbiAgICAgIGZhaWx1cmUsXG4gICAgICBoZWFkZXJzOiB0cnlFeGVjLmNhbGwodGhpcywgaGVhZGVycywgbnVsbCwgYXJndW1lbnRzKSxcbiAgICAgIG92ZXJyaWRlTWltZVR5cGU6IHRyeUV4ZWMuY2FsbCh0aGlzLCBvdmVycmlkZU1pbWVUeXBlLCBudWxsLCBhcmd1bWVudHMpXG4gICAgfVxuICB9XG59XG5cblxuLyoqXG4gKiAgQGZ1bmN0aW9uIDx0cnlFeGVjPiBleGVjdXRlIHtmbn0gaWYgaXQgaXMgYSBmdW5jdGlvbiBvclxuICogICAgcmV0dXJuIHtmbn0gaWYgaXQgaXMgYSBzdHJpbmcgb3JcbiAqICAgIHJldHVybiB7ZGVmfS5cbiAqICBAcmV0dXJuIHtzdHJpbmd8Kn1cbiAqL1xuXG5mdW5jdGlvbiB0cnlFeGVjIChmbiwgZGVmLCBhcmdzKSB7XG4gIGlmICh0eXBlb2YgZm4gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmdzKVxuICB9XG4gIGlmICh0eXBlb2YgZm4gPT09IFwic3RyaW5nXCIpIHtcbiAgICByZXR1cm4gZm5cbiAgfVxuICByZXR1cm4gZGVmXG59XG5cbmV4cG9ydCB7IGFqYXggYXMgZGVmYXVsdCwgYWpheCwgYWpheFBhcmFtZXRlcnMsIHRyeUV4ZWMgfVxuIiwiaW1wb3J0IGFqYXggZnJvbSBcIi4vYWpheFwiXG5cbmZ1bmN0aW9uIG1lcmdlICguLi5hcmdzKSB7XG4gIGNvbnN0IHJlc3VsdCA9IHt9LCBzdWNjZXNzID0gW10sIGZhaWx1cmUgPSBbXVxuICB3aGlsZSAoYXJncy5sZW5ndGgpIHtcbiAgICBjb25zdCBidWlsZGVyID0gYXJncy5zaGlmdCgpXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYnVpbGRlci5zdWNjZXNzKSkgc3VjY2Vzcy5jb25jYXQoYnVpbGRlci5zdWNjZXNzKVxuICAgIGlmICh0eXBlb2YgYnVpbGRlci5zdWNjZXNzID09PSBcImZ1bmN0aW9uXCIpIHN1Y2Nlc3MucHVzaChidWlsZGVyLnN1Y2Nlc3MpXG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYnVpbGRlci5mYWlsdXJlKSkgZmFpbHVyZS5jb25jYXQoYnVpbGRlci5mYWlsdXJlKVxuICAgIGlmICh0eXBlb2YgYnVpbGRlci5mYWlsdXJlID09PSBcImZ1bmN0aW9uXCIpIGZhaWx1cmUucHVzaChidWlsZGVyLmZhaWx1cmUpXG4gICAgT2JqZWN0LmFzc2lnbihyZXN1bHQsIGJ1aWxkZXIpXG4gIH1cbiAgcmVzdWx0LnN1Y2Nlc3MgPSBzdWNjZXNzXG4gIHJlc3VsdC5mYWlsdXJlID0gZmFpbHVyZVxuICByZXR1cm4gcmVzdWx0XG59XG5cblxuLyoqXG4gKiAgQGZ1bmN0aW9uIDxhamF4UGFyYW1ldGVycz4gZXhlY3V0ZSBwYXJhbWV0ZXJzIGFuZCByZXR1cm5zIGluIGdvb2QgZm9ybWF0XG4gKiAgQHBhcmFtIHtzdHJpbmd8ZnVuY3Rpb258b2JqZWN0fSBtZXRob2Qgb3IgYnVpbGRlclxuICogIEBwYXJhbSB7c3RyaW5nfGZ1bmN0aW9ufSB1cmkgdG8gcmVzb3VyY2VcbiAqICBAcGFyYW0ge3N0cmluZ3xmdW5jdGlvbn0gZGF0YSB0byBzZW5kIGluIHJlcXVlc3QgYm9keVxuICogIEBwYXJhbSB7ZnVuY3Rpb258QXJyYXkuPGZ1bmN0aW9uPn0gc3VjY2VzcyBmdW5jdGlvbnNcbiAqICBAcGFyYW0ge2Z1bmN0aW9ufEFycmF5LjxmdW5jdGlvbj59IGZhaWx1cmUgZnVuY3Rpb25zXG4gKiAgQHBhcmFtIHtvYmplY3R8ZnVuY3Rpb259IGhlYWRlcnMgdG8gc2VuZCB0byByZXF1ZXN0IGhlYWRlcnNcbiAqICBAcGFyYW0ge3N0cmluZ3xmdW5jdGlvbn0gb3ZlcnJpZGVNaW1lVHlwZSB0byBlbmZvcmNlIHJlc3BvbnNlIHJlYWRpbmcgZm9ybWF0XG4gKiAgQHJldHVybiB7T2JqZWN0fVxuICovXG5cbmZ1bmN0aW9uIGFqYXhQYXJhbWV0ZXJzIChtZXRob2QsIHVyaSwgZGF0YSwgc3VjY2VzcywgZmFpbHVyZSwgaGVhZGVycywgb3ZlcnJpZGVNaW1lVHlwZSkge1xuICBpZiAodHlwZW9mIG1ldGhvZCA9PT0gXCJvYmplY3RcIiAmJiBtZXRob2QgIT09IG51bGwpIHtcbiAgICByZXR1cm4gYWpheFBhcmFtZXRlcnMoXG4gICAgICBtZXRob2QubWV0aG9kLFxuICAgICAgbWV0aG9kLnVyaSB8fCBtZXRob2QudXJsIHx8IG1ldGhvZC5maWxlIHx8IG1ldGhvZC5zb3VyY2UsXG4gICAgICBtZXRob2QuZGF0YSB8fCBtZXRob2QuYm9keSB8fCBtZXRob2QucG9zdCxcbiAgICAgIG1ldGhvZC5zdWNjZXNzIHx8IG1ldGhvZC5sb2FkLFxuICAgICAgbWV0aG9kLmZhaWx1cmUgfHwgbWV0aG9kLmVycm9yLFxuICAgICAgbWV0aG9kLmhlYWRlcnMsXG4gICAgICBtZXRob2Qub3ZlcnJpZGVNaW1lVHlwZVxuICAgIClcbiAgfVxuICBlbHNlIHtcbiAgICByZXR1cm4ge1xuICAgICAgbWV0aG9kLFxuICAgICAgdXJpLFxuICAgICAgZGF0YSxcbiAgICAgIHN1Y2Nlc3MsXG4gICAgICBmYWlsdXJlLFxuICAgICAgaGVhZGVycyxcbiAgICAgIG92ZXJyaWRlTWltZVR5cGVcbiAgICB9XG4gIH1cbn1cblxuXG4vKipcbiAqICBAY2xhc3MgPFJlc291cmNlPiBzdG9yZSBtZXRob2RzIG9uIGEgY29tbW9uIGRpc3RhbnQgXCJyZXNvdXJjZVwiLiBBIGRpc3RhbnRcbiAqICAgIHJlc291cmNlIGlzIGEgc3RyZWFtIHdpdGggc2FtZSBvcmlnaW4gYW5kIChhbG1vc3QpIHNhbWUgYWNlc3MgbWV0aG9kcyxcbiAqICAgIGxpa2UgYSBkYXRhIHNlcnZlci5cbiAqICAgIExvb2sgY2FyZWZ1bGx5LCB0aGUgY29uc3RydWN0b3IsIHRoZSBhZGRNZXRob2QgYW5kIGVhY2ggbWV0aG9kcyBhcmUgY2FsbGVkXG4gKiAgICB3aXRoIHNhbWUgcGFyYW1ldGVycywgZXhjZXB0IGFkZE1ldGhvZCB3aGljaCBoYXMgYSBcIm5hbWVcIiBhdCBmaXJzdFxuICogICAgcGFyYW1ldGVyLiBUaGVzZXMgcGFyYW1ldGVycyBhcmUgbWVyZ2VkIHRvIGNyZWF0ZSB0aGUgZmluYWwgYnVpbGRlciBmb3JcbiAqICAgIHRoZSByZXF1ZXN0LlxuICovXG5cbmNsYXNzIFJlc291cmNlIHtcblxuICAvKipcbiAgICogIEBtZXRob2QgPGNvbnN0cnVjdG9yPlxuICAgKiAgQHBhcmFtIHtzdHJpbmd8ZnVuY3Rpb258b2JqZWN0fSBtZXRob2Qgb3IgYnVpbGRlclxuICAgKiAgQHBhcmFtIHtzdHJpbmd8ZnVuY3Rpb259IHVyaSB0byByZXNvdXJjZVxuICAgKiAgQHBhcmFtIHtzdHJpbmd8ZnVuY3Rpb259IGRhdGEgdG8gc2VuZCBpbiByZXF1ZXN0IGJvZHlcbiAgICogIEBwYXJhbSB7ZnVuY3Rpb258QXJyYXkuPGZ1bmN0aW9uPn0gc3VjY2VzcyBmdW5jdGlvbnNcbiAgICogIEBwYXJhbSB7ZnVuY3Rpb258QXJyYXkuPGZ1bmN0aW9uPn0gZmFpbHVyZSBmdW5jdGlvbnNcbiAgICogIEBwYXJhbSB7b2JqZWN0fGZ1bmN0aW9ufSBoZWFkZXJzIHRvIHNlbmQgdG8gcmVxdWVzdCBoZWFkZXJzXG4gICAqICBAcGFyYW0ge3N0cmluZ3xmdW5jdGlvbn0gb3ZlcnJpZGVNaW1lVHlwZSB0byBlbmZvcmNlIHJlc3BvbnNlIHJlYWRpbmcgZm9ybWF0XG4gICAqICBAcmV0dXJuIHtSZXNvdXJjZX0gc2VsZlxuICAgKi9cblxuICBjb25zdHJ1Y3RvciAoLi4uYXJncykge1xuICAgIHRoaXMuY29tbW9uQnVpbGRlciA9IGFqYXhQYXJhbWV0ZXJzLmFwcGx5KG51bGwsIGFyZ3MpXG4gICAgdGhpcy5tZXRob2RzQnVpbGRlciA9IHt9XG4gIH1cblxuICAvKipcbiAgICogIEBtZXRob2QgPGFkZE1ldGhvZD4gcmVnaXN0ZXIgYSBuZXcgbWV0aG9kIG9mIHRoaXMgcmVzb3VyY2UsIHdoaWNoIGNvdWxkIGJlIGNhbGxlZFxuICAgKiAgICAgIHdpdGggcmVzb3VyY2UuJHtuYW1lfShtZXRob2QsIHVyaSwgZGF0YSwgc3VjY2VzcywgZmFpbHVyZSwgaGVhZGVycywgb3ZlcnJpZGVNaW1lVHlwZSkuXG4gICAqICBAcGFyYW0ge3N0cmluZ30gbmFtZSB1c2VkIHRvIGNhbGwgdGhlIG1ldGhvZC5cbiAgICogIEBwYXJhbSB7c3RyaW5nfGZ1bmN0aW9ufG9iamVjdH0gbWV0aG9kIG9yIGJ1aWxkZXJcbiAgICogIEBwYXJhbSB7c3RyaW5nfGZ1bmN0aW9ufSB1cmkgdG8gcmVzb3VyY2VcbiAgICogIEBwYXJhbSB7c3RyaW5nfGZ1bmN0aW9ufSBkYXRhIHRvIHNlbmQgaW4gcmVxdWVzdCBib2R5XG4gICAqICBAcGFyYW0ge2Z1bmN0aW9ufEFycmF5LjxmdW5jdGlvbj59IHN1Y2Nlc3MgZnVuY3Rpb25zXG4gICAqICBAcGFyYW0ge2Z1bmN0aW9ufEFycmF5LjxmdW5jdGlvbj59IGZhaWx1cmUgZnVuY3Rpb25zXG4gICAqICBAcGFyYW0ge29iamVjdHxmdW5jdGlvbn0gaGVhZGVycyB0byBzZW5kIHRvIHJlcXVlc3QgaGVhZGVyc1xuICAgKiAgQHBhcmFtIHtzdHJpbmd8ZnVuY3Rpb259IG92ZXJyaWRlTWltZVR5cGUgdG8gZW5mb3JjZSByZXNwb25zZSByZWFkaW5nIGZvcm1hdFxuICAgKiAgQHJldHVybiB7UmVzb3VyY2V9IHNlbGZcbiAgICovXG5cbiAgYWRkTWV0aG9kIChuYW1lLCAuLi5hcmdzKSB7XG4gICAgY29uc3Qgc2VsZiA9IHRoaXNcbiAgICBpZiAodGhpc1tuYW1lXSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGlzIHJlc291cmNlIGFscmVhZHkgaGFzIGEgJHtuYW1lfSBtZXRob2RgKVxuICAgIH1cblxuICAgIHRoaXMubWV0aG9kc0J1aWxkZXJbbmFtZV0gPSBhamF4UGFyYW1ldGVycy5hcHBseShudWxsLCBhcmdzKVxuICAgIHRoaXNbbmFtZV0gPSAoKSA9PiB7XG4gICAgICBjb25zdCBidWlsZGVyID0gYWpheFBhcmFtZXRlcnMuYXBwbHkobnVsbCwgYXJndW1lbnRzKVxuICAgICAgcmV0dXJuIGFqYXgobWVyZ2Uoc2VsZi5jb21tb25CdWlsZGVyLCBzZWxmLm1ldGhvZHNCdWlsZGVyW25hbWVdLCBidWlsZGVyKSlcbiAgICB9XG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG5cbiAgLyoqXG4gICAqICBAZnVuY3Rpb24gPHJlcXVlc3Q+IHNlbmQgYSByZXF1ZXN0XG4gICAqICBAcGFyYW0ge3N0cmluZ3xmdW5jdGlvbnxvYmplY3R9IG1ldGhvZCBvciBidWlsZGVyXG4gICAqICBAcGFyYW0ge3N0cmluZ3xmdW5jdGlvbn0gdXJpIHRvIHJlc291cmNlXG4gICAqICBAcGFyYW0ge3N0cmluZ3xmdW5jdGlvbn0gZGF0YSB0byBzZW5kIGluIHJlcXVlc3QgYm9keVxuICAgKiAgQHBhcmFtIHtmdW5jdGlvbnxBcnJheS48ZnVuY3Rpb24+fSBzdWNjZXNzIGZ1bmN0aW9uc1xuICAgKiAgQHBhcmFtIHtmdW5jdGlvbnxBcnJheS48ZnVuY3Rpb24+fSBmYWlsdXJlIGZ1bmN0aW9uc1xuICAgKiAgQHBhcmFtIHtvYmplY3R8ZnVuY3Rpb259IGhlYWRlcnMgdG8gc2VuZCB0byByZXF1ZXN0IGhlYWRlcnNcbiAgICogIEBwYXJhbSB7c3RyaW5nfGZ1bmN0aW9ufSBvdmVycmlkZU1pbWVUeXBlIHRvIGVuZm9yY2UgcmVzcG9uc2UgcmVhZGluZyBmb3JtYXRcbiAgICogIEByZXR1cm4ge1Byb21pc2UuPFhNTEh0dHBSZXF1ZXN0Pi48WE1MSHR0cFJlcXVlc3Q+fVxuICAgKi9cblxuICBzdGF0aWMgcmVxdWVzdCAoLi4uYXJncykge1xuICAgIGNvbnN0IGJ1aWxkZXIgPSBhamF4UGFyYW1ldGVycy5hcHBseShudWxsLCBhcmdzKVxuICAgIHJldHVybiBhamF4KGJ1aWxkZXIpXG4gIH1cbn1cblxuZXhwb3J0IHsgUmVzb3VyY2UgYXMgZGVmYXVsdCwgUmVzb3VyY2UsIG1lcmdlIH1cbiIsImNvbnN0IEZPUk1BVFMgPSB7XG4gIG51bWJlcjogKHN0cikgPT4ge1xuICAgIGNvbnN0IG4gPSBwYXJzZUZsb2F0KHN0cilcbiAgICBpZiAoaXNOYU4obikpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCYWQgdHlwZTogZXhwZWN0IGFyZ3VtZW50IHRvIGJlIGEgbnVtYmVyLlwiKVxuICAgIHJldHVybiBuXG4gIH0sXG4gIGludGVnZXI6IChzdHIpID0+IHtcbiAgICBjb25zdCBuID0gcGFyc2VJbnQoc3RyKVxuICAgIGlmIChpc05hTihuKSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkJhZCB0eXBlOiBleHBlY3QgYXJndW1lbnQgdG8gYmUgYW4gaW50ZWdlci5cIilcbiAgICByZXR1cm4gblxuICB9LFxuICBmbG9hdDogKHN0cikgPT4ge1xuICAgIGNvbnN0IG4gPSBwYXJzZUZsb2F0KHN0cilcbiAgICBpZiAoaXNOYU4obikpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCYWQgdHlwZTogZXhwZWN0IGFyZ3VtZW50IHRvIGJlIGEgZmxvYXQuXCIpXG4gICAgcmV0dXJuIG5cbiAgfSxcbiAgdGV4dDogKHN0cikgPT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzID0gSlNPTi5wYXJzZShzdHIpXG4gICAgICBpZiAodHlwZW9mIHMgPT09IFwic3RyaW5nXCIpXG4gICAgICAgIHJldHVybiBzXG4gICAgfVxuICAgIGNhdGNoIChlKSB7fVxuICAgIHJldHVybiBzdHJcbiAgfSxcbiAgb2JqZWN0OiAoc3RyKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG8gPSBKU09OLnBhcnNlKHN0cilcbiAgICAgIGlmICh0eXBlb2YgbyA9PT0gXCJvYmplY3RcIilcbiAgICAgICAgcmV0dXJuIG9cbiAgICB9XG4gICAgY2F0Y2ggKGUpIHt9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQmFkIHR5cGU6IGV4cGVjdCBhcmd1bWVudCB0byBiZSBhbiBvYmplY3QuXCIpXG4gIH0sXG4gIGJvb2xlYW46IChzdHIpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgYiA9IEpTT04ucGFyc2Uoc3RyKVxuICAgICAgaWYgKHR5cGVvZiBiID09PSBcImJvb2xlYW5cIilcbiAgICAgICAgcmV0dXJuIGJcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHt9XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQmFkIHR5cGU6IGV4cGVjdCBhcmd1bWVudCB0byBiZSBhIGJvb2xlYW4uXCIpXG4gIH0sXG4gIGFueTogKHN0cikgPT4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShzdHIpXG4gICAgfVxuICAgIGNhdGNoIChlKSB7fVxuICAgIHJldHVybiBzdHJcbiAgfSxcbiAgdXVpZDogKHN0cikgPT4ge1xuICAgIGlmIChzdHIubWF0Y2goL1tcXGRhLWZdezh9LVtcXGRhLWZdezR9LTRbXFxkYS1mXXszfS1bODlhYl1bXFxkYS1mXXszfS1bXFxkYS1mXXsxMn0vKSlcbiAgICAgIHJldHVybiBzdHJcbiAgICBlbHNlXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCYWQgdHlwZTogZXhwZWN0IGFyZ3VtZW50IHRvIGJlIGFuIHV1aWQuXCIpXG4gIH1cbn1cblxubGV0IGN1cnJlbnRBcmdzXG5cblxuLyoqXG4gKiBAY2xhc3MgPFJvdXRlPiBpZiBhIHJvdXRlIG1hdGNoZXMgY3VycmVudCBwYXRoLCByZXR1cm4gYXJncyB3aXRoIGdldEFyZ3MoKS5cbiAqICAgIElmIGFyZ3MgYXJlIHJldHVybmVkLCB0aGVuIGV4ZWN1dGUgZ28oYXJncykuXG4gKi9cblxuY2xhc3MgUm91dGUge1xuXG4gIC8qKlxuICAgKiBAbWV0aG9kIDxjb25zdHJ1Y3Rvcj4gc2V0IHBhdGggYW5kIGl0cyBjb250cm9sbGVyIGlmIHJvdXRlIG1hdGNoXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoIGZvcm1hdCBcIi9rZXk6dHlwZS9rZXk6Lzp0eXBlLypcIlxuICAgKiBAcGFyYW0ge31cbiAgICovXG5cbiAgY29uc3RydWN0b3IgKHBhdGgsIGNvbnRyb2xsZXIpIHtcbiAgICBpZiAodHlwZW9mIHBhdGggIT09IFwic3RyaW5nXCIpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGaXJzdCBwYXJhbWV0ZXIgc2hvdWxkIGJlIGEgc3RyaW5nLlwiKVxuICAgIGlmICh0eXBlb2YgY29udHJvbGxlciAhPT0gXCJmdW5jdGlvblwiKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2Vjb25kIHBhcmFtZXRlciBzaG91bGQgYmUgYSBmdW5jdGlvbi5cIilcbiAgICB0aGlzLnBhdGggPSBwYXRoXG4gICAgdGhpcy5jb250cm9sbGVyID0gY29udHJvbGxlclxuICB9XG5cblxuICAvKipcbiAgICogQG1ldGhvZCA8Z28+IHJlZGlyZWN0IHRvIHRoaXMgY29udHJvbGxlciBwYXNzaW5nIGJ5IFVSTFxuICAgKiBAcGFyYW0geyp9IGFyZ3MgbmV3IGFyZ3VtZW50cyBmb3IgdGhpcyBjb250cm9sbGVyLCBtZXJnZWQgd2l0aCBjdXJyZW50IGFyZ3VtZW50c1xuICAgKiBAcmV0dXJuIHtSb3V0ZX0gc2VsZlxuICAgKi9cblxuICBnbyAoYXJncywgZm9yY2UpIHtcbiAgICBjb25zdCBwYXJhbXMgPSAodHlwZW9mIGFyZ3MgPT09IFwib2JqZWN0XCIpID8gYXJncyA6IHt9XG4gICAgY29uc3QgcGF0aCA9IHRoaXMuY3JlYXRlUGF0aChPYmplY3QuYXNzaWduKHt9LCBjdXJyZW50QXJncywgcGFyYW1zKSlcbiAgICBpZiAoZm9yY2UgJiYgcGF0aCA9PT0gUm91dGUuZ2V0QnJvd3NlclJlcXVlc3QoKSkge1xuICAgICAgdGhpcy5ydW4oYXJncylcbiAgICB9IGVsc2Uge1xuICAgICAgUm91dGUuc2V0QnJvd3NlclJlcXVlc3QocGF0aClcbiAgICB9XG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEBtZXRob2QgPHJ1bj4gcnVuIHRoaXMgY29udHJvbGxlciBhbnl3YXkgd2l0aCB0aGVzZSBhcmd1bWVudHMuXG4gICAqIEBwYXJhbSB7Kn0gYXJncyBpZiBmYWxzeSwgdHJ5IHRvIHJldHVybiByb3V0ZS5nZXRBcmdzKCkuXG4gICAqIEByZXR1cm4geyp9IHJldHVybmVkIGJ5IGNvbnRyb2xsZXIuXG4gICAqL1xuXG4gIHJ1biAoYXJncykge1xuICAgIGN1cnJlbnRBcmdzID0gYXJncyB8fCB0aGlzLmdldEFyZ3MoKVxuICAgIHJldHVybiB0aGlzLmNvbnRyb2xsZXIoY3VycmVudEFyZ3MpXG4gIH1cblxuXG4gIC8qKlxuICAgKiBAbWV0aG9kIDxnZXRBcmdzPiByZXR1cm4gYW4gb2JqZWN0IG9mIGNvcnJlc3BvbmRpbmcgcGFyYW1ldGVycyBpbiBicm93c2VyXG4gICAqICAgIHBhdGggb3IgbnVsbCBvYmplY3QgaWYgaXQgZG9lcyBub3QgbWF0Y2guXG4gICAqIEByZXR1cm4ge09iamVjdHxudWxsfSBudWxsIGlmIGl0IGRvZXMgbm90IG1hdGNoLlxuICAgKi9cblxuICBnZXRBcmdzICgpIHtcbiAgICBjb25zdCBjdXJyZW50ID0gUm91dGUuZ2V0UmVxdWVzdE9iamVjdCgpLFxuICAgICAgc2VsZiA9IHRoaXMuZ2V0UmVxdWVzdE9iamVjdCgpXG5cbiAgICBpZiAoc2VsZltzZWxmLmxlbmd0aCAtIDFdID09PSBcIipcIikge1xuICAgICAgaWYgKGN1cnJlbnQubGVuZ3RoIDwgc2VsZi5sZW5ndGggLSAxKSB7XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjdXJyZW50Lmxlbmd0aCAhPT0gc2VsZi5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgcmV0dXJuIHNlbGYucmVkdWNlKChhcmdzLCBjaHVuaywgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IHRtcCA9IGN1cnJlbnRbaW5kZXhdXG4gICAgICBpZiAoYXJncyA9PT0gbnVsbCkgcmV0dXJuIG51bGxcbiAgICAgIGVsc2UgaWYgKGNodW5rID09PSBcIipcIikgcmV0dXJuIGFyZ3NcbiAgICAgIGVsc2UgaWYgKHR5cGVvZiBjaHVuayA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIChjaHVuayA9PT0gdG1wKSA/IGFyZ3MgOiBudWxsXG4gICAgICBlbHNlIGlmICh0eXBlb2YgY2h1bmsgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgY29uc3QgeyBrZXk6IGV4cGVjdGVkS2V5LCB2YWx1ZTogZXhwZWN0ZWRWYWx1ZSwgcmVnZXhwLCB0eXBlIH0gPSBjaHVua1xuICAgICAgICBjb25zdCB7IGtleSwgdmFsdWUgfSA9ICh0eXBlb2YgdG1wID09PSBcIm9iamVjdFwiKSA/IHRtcCA6IHsgdmFsdWU6IHRtcCB9XG4gICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICBpZiAoa2V5ID09PSBleHBlY3RlZEtleSkge1xuICAgICAgICAgICAgaWYgKHR5cGUpIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhcmdzW2V4cGVjdGVkS2V5XSA9IEZPUk1BVFNbdHlwZV0odmFsdWUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFyZ3NcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVnZXhwKSB7XG4gICAgICAgICAgICAgIGlmIChyZWdleHAudGVzdCh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBhcmdzW2V4cGVjdGVkS2V5XSA9IHZhbHVlXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFyZ3NcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgIGFyZ3NbZXhwZWN0ZWRLZXldID0gdmFsdWVcbiAgICAgICAgICAgICAgcmV0dXJuIGFyZ3NcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZXhwZWN0ZWRWYWx1ZSkge1xuICAgICAgICAgIGlmICh0eXBlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBhcmdzW2V4cGVjdGVkVmFsdWVdID0gRk9STUFUU1t0eXBlXSh2YWx1ZSlcbiAgICAgICAgICAgICAgcmV0dXJuIGFyZ3NcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKHJlZ2V4cCkge1xuICAgICAgICAgICAgaWYgKHJlZ2V4cC50ZXN0KHZhbHVlKSkge1xuICAgICAgICAgICAgICBhcmdzW2V4cGVjdGVkVmFsdWVdID0gdmFsdWVcbiAgICAgICAgICAgICAgcmV0dXJuIGFyZ3NcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVybiBudWxsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgYXJnc1tleHBlY3RlZFZhbHVlXSA9IHZhbHVlXG4gICAgICAgICAgICByZXR1cm4gYXJnc1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGxcbiAgICB9LCB7fSlcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEBtZXRob2QgPGlzTWF0Y2g+IHJldHVybiBpZiBjdXJyZW50IHJvdXRlIG1hdGNoZXMgYnJvd3NlciBwYXRoXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAqL1xuXG4gIGlzTWF0Y2ggKCkge1xuICAgIHJldHVybiB0aGlzLmdldEFyZ3MoKSAhPT0gbnVsbFxuICB9XG5cblxuICAvKipcbiAgICogQG1ldGhvZCA8Y3JlYXRlUGF0aD4gY3JlYXRlIGEgcGF0aCBzdHJpbmcgd2l0aCBhcmd1bWVudHMsIGluIG9yZGVyIHRvXG4gICAqICAgIGNyZWF0ZSBhIGxpbmsgdG8gY2FsbCB0aGlzIHJvdXRlLlxuICAgKiBAcGFyYW0ge09iamVjdH0gYXJnc1xuICAgKiBAcmV0dXJuIHtTdHJpbmd9IHBhdGhcbiAgICovXG5cbiAgY3JlYXRlUGF0aCAoYXJncykge1xuICAgIGlmICh0eXBlb2YgYXJncyAhPT0gXCJvYmplY3RcIikge1xuICAgICAgYXJncyA9IHt9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZ2V0UmVxdWVzdE9iamVjdCgpLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHJldHVybiAoaXRlbSA9PT0gXCIqXCIpID8gXCJcIiA6IGl0ZW1cbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBjb25zdCB7IGtleSwgdmFsdWUgfSA9IGl0ZW1cblxuICAgICAgICBpZiAoa2V5ID09PSBcIlwiKSB7XG4gICAgICAgICAgaWYgKGFyZ3NbdmFsdWVdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2FuJ3QgYnVpbGQgdGhpcyBwYXRoLCBub3QgZW5vdWdoIGFyZ3VtZW50cyAoZXhwZWN0IFwiJHt2YWx1ZX1cIiBmaWVsZClgKVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gYXJnc1t2YWx1ZV1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSA9PT0gXCJcIikge1xuICAgICAgICAgIHJldHVybiBrZXkgKyBcIjpcIiArIChhcmdzW2tleV0gPT09IHVuZGVmaW5lZCA/IFwiXCIgOiBhcmdzW2tleV0pXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBrZXkgKyBcIjpcIiArIEpTT04uc3RyaW5naWZ5KEZPUk1BVFNbdmFsdWVdKGFyZ3Nba2V5XSkpXG4gICAgICAgICAgfVxuICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbid0IGJ1aWxkIHRoaXMgcGF0aCwgYmFkIGZvcm1hdHRpbmcgYXJndW1lbnRzIChleHBlY3QgXCIke2tleX1cIiBmaWVsZClgKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pLmpvaW4oXCIvXCIpXG4gIH1cblxuXG4gIC8qKlxuICAgKiBAbWV0aG9kIDxnZXRSZXF1ZXN0T2JqZWN0PiB0cmFuc2xhdGVzIGEgcGF0aCB0byBhbiBvYmplY3RcbiAgICogQHBhcmFtIHtTdHJpbmd9IHVybCBmb3JtYXQgXCIva2V5OnR5cGUva2V5Oi86dHlwZS8qXCJcbiAgICogQHJldHVybiB7QXJyYXkuPE9iamVjdCwqPn1cbiAgICovXG5cbiAgZ2V0UmVxdWVzdE9iamVjdCAoKSB7XG4gICAgcmV0dXJuIHRoaXMucGF0aC5zcGxpdChcIi9cIikubWFwKChpdGVtKSA9PiB7XG4gICAgICBjb25zdCBzcGxpdCA9IGl0ZW0uc3BsaXQoXCI6XCIpXG5cbiAgICAgIGlmIChzcGxpdC5sZW5ndGggPiAxKSB7XG4gICAgICAgIGxldCBrZXkgPSBzcGxpdC5zaGlmdCgpLFxuICAgICAgICAgIHZhbHVlID0gc3BsaXQuam9pbihcIjpcIiksXG4gICAgICAgICAgcmVnZXhwID0gdmFsdWUubWF0Y2goLyhbXihdKylcXCgoLispXFwpLyk7XG5cbiAgICAgICAgaWYgKHJlZ2V4cCkge1xuICAgICAgICAgIFssIHZhbHVlLCByZWdleHBdID0gcmVnZXhwXG4gICAgICAgICAgaWYgKEZPUk1BVFNbcmVnZXhwXSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICAgdHlwZTogcmVnZXhwXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgIHJlZ2V4cDogbmV3IFJlZ0V4cChyZWdleHApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gXCJcIikge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoRk9STUFUU1t2YWx1ZV0pIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgdHlwZTogdmFsdWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICByZWdleHA6IG5ldyBSZWdFeHAodmFsdWUpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gaXRlbVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuXG4gIC8qKlxuICAgKiBAZnVuY3Rpb24gPGdldEJyb3dzZXJSZXF1ZXN0PiByZXR1cm5zIHRoZSBjdXJyZW50IGJyb3dzZXIgcGF0aFxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuXG4gIHN0YXRpYyBnZXRCcm93c2VyUmVxdWVzdCAoKSB7XG4gICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5oYXNoLnN1YnN0cigxKVxuICB9XG5cblxuICAvKipcbiAgICogQGZ1bmN0aW9uIDxzZXRCcm93c2VyUmVxdWVzdD4gc2V0IHRoZSBjdXJyZW50IGJyb3dzZXIgcGF0aFxuICAgKi9cblxuICBzdGF0aWMgc2V0QnJvd3NlclJlcXVlc3QgKHN0cikge1xuICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gc3RyXG4gIH1cblxuXG4gIC8qKlxuICAgKiBAZnVuY3Rpb24gPGdldFJlcXVlc3RPYmplY3Q+IHRyYW5zbGF0ZXMgYSBwYXRoIHRvIGFuIG9iamVjdFxuICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsIGZvcm1hdCBcIi9rZXk6dHlwZS9rZXk6Lzp0eXBlLypcIlxuICAgKiBAcmV0dXJuIHtBcnJheS48T2JqZWN0LCo+fVxuICAgKi9cblxuICBzdGF0aWMgZ2V0UmVxdWVzdE9iamVjdCAodXJsKSB7XG4gICAgaWYgKHR5cGVvZiB1cmwgIT09IFwic3RyaW5nXCIpXG4gICAgICB1cmwgPSBSb3V0ZS5nZXRCcm93c2VyUmVxdWVzdCgpXG5cbiAgICBpZiAoIXVybCkgcmV0dXJuIFtdXG5cbiAgICByZXR1cm4gdXJsLnNwbGl0KFwiL1wiKS5tYXAoKGl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IHNwbGl0ID0gaXRlbS5zcGxpdChcIjpcIilcbiAgICAgIGlmIChzcGxpdC5sZW5ndGggPiAxKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IHNwbGl0LnNoaWZ0KCksXG4gICAgICAgICAgdmFsdWUgPSBzcGxpdC5qb2luKFwiOlwiKVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGtleSxcbiAgICAgICAgICB2YWx1ZVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gaXRlbVxuICAgICAgfVxuICAgIH0pXG4gIH1cbn1cblxuZXhwb3J0IHsgUm91dGUgYXMgZGVmYXVsdCwgUm91dGUsIEZPUk1BVFMgfVxuIiwiaW1wb3J0IFJvdXRlIGZyb20gXCIuL3JvdXRlXCJcblxuY29uc3QgUk9VVEVSUyA9IFtdXG5sZXQgZGVmYXVsdENvbnRyb2xsZXIgPSBudWxsXG5sZXQgbGF1bmNoZWQgPSBmYWxzZVxuXG53aW5kb3cuciA9IFJPVVRFUlNcblxuLyoqXG4gKiBAY2xhc3MgPFJvdXRlcj4gc3RvY2sgcm91dGVzLCBhZGQgcHJlZml4IGluIHRoZWlyIHBhdGhzLCB0ZXN0cyB0aGVtLCBhbmRcbiAqICAgIGV4ZWN1dGVzIHRoZWlyIGNvbnRyb2xsZXJzIGlmIG9uZSBtYXRjaGVzLlxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJvdXRlciB7XG5cblxuICAvKipcbiAgICogQG1ldGhvZCA8Y29uc3RydWN0b3I+IHNldCBwcmVmaXggb2YgZWFjaCB1cmxzXG4gICAqIEByZXR1cm4ge1JvdXRlcn0gc2VsZlxuICAgKi9cblxuICBjb25zdHJ1Y3RvciAoYmFzZVVybCwgZmlyc3RDYWxsKSB7XG4gICAgdGhpcy5iYXNlVXJsID0gYmFzZVVybCB8fCBcIlwiXG4gICAgdGhpcy5maXJzdENhbGwgPSBmaXJzdENhbGwgfHwgbnVsbFxuICAgIHRoaXMucm91dGVzID0gW11cbiAgICBST1VURVJTLnB1c2godGhpcylcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEBtZXRob2QgPGFkZD4gYWRkIGEgcm91dGUgaW4gdGhpcyByb3V0ZXJcbiAgICogQHBhcmFtIHtSb3V0ZXxzdHJpbmd9IHJvdXRlIG9yIHBhdGhcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY29udHJvbGxlciB0byBleGVjdXRlIHdoZW4gcGF0aCBtYXRjaGVzXG4gICAqIEByZXR1cm4ge1JvdXRlfSBjcmVhdGVkXG4gICAqL1xuXG4gIGFkZCAocm91dGUsIGNvbnRyb2xsZXIpIHtcbiAgICBpZiAodHlwZW9mIHJvdXRlID09PSBcInN0cmluZ1wiICYmIHR5cGVvZiBjb250cm9sbGVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHJvdXRlID0gbmV3IFJvdXRlKHRoaXMuYmFzZVVybCArIHJvdXRlLCBjb250cm9sbGVyKVxuICAgIH1cbiAgICBpZiAocm91dGUgaW5zdGFuY2VvZiBSb3V0ZSkge1xuICAgICAgdGhpcy5yb3V0ZXMucHVzaChyb3V0ZSlcbiAgICAgIGlmIChsYXVuY2hlZCkge1xuICAgICAgICBjb25zdCBhcmdzID0gcm91dGUuZ2V0QXJncygpXG4gICAgICAgIGlmIChhcmdzKSB7XG4gICAgICAgICAgdGhpcy5jYWxsRmlyc3QoKVxuICAgICAgICAgIHJvdXRlLmdvKGFyZ3MpXG4gICAgICAgICAgUm91dGVyLmN1cnJlbnQgPSByb3V0ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByb3V0ZVxuICB9XG5cblxuICAvKipcbiAgICogQG1ldGhvZCA8dGVzdD4gZWFjaCByb3V0ZXMgb2YgdGhpcyByb3V0ZXIgYW5kIHJldHVybiBhIHBhdGggaWYgaXQgbWF0Y2hlc1xuICAgKiBAcmV0dXJuIHtSb3V0ZXxudWxsfSBudWxsIGlmIG5vdCBmb3VuZFxuICAgKi9cblxuICB0ZXN0ICgpIHtcbiAgICByZXR1cm4gdGhpcy5yb3V0ZXMuZmluZCgocm91dGUpID0+IHtcbiAgICAgIGNvbnN0IGFyZ3MgPSByb3V0ZS5nZXRBcmdzKClcbiAgICAgIGlmIChhcmdzICE9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiByb3V0ZVxuICAgICAgfVxuICAgIH0pXG4gIH1cblxuXG4gIC8qKlxuICAgKiBAbWV0aG9kIDxjYWxsRmlyc3Q+IGlzIGNhbGxlZCBvbmUgdGltZSB3aGVuIGEgcm91dGUgb2YgdGhpcyByb3V0ZXIgaXMgZm91bmQuXG4gICAqL1xuXG4gIGNhbGxGaXJzdCAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmZpcnN0Q2FsbCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICB0aGlzLmZpcnN0Q2FsbCgpXG4gICAgICB0aGlzLmZpcnN0Q2FsbCA9IG51bGxcbiAgICB9XG4gIH1cblxuXG4gIC8qKlxuICAgKiBAZnVuY3Rpb24gPHNldERlZmF1bHQ+IHNldCB0aGUgY29udHJvbGxlciB0byBjYWxsIHdoZW4gbm8gYW55IHJvdXRlIGZvdW5kLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjb250cm9sbGVyXG4gICAqL1xuXG4gIHN0YXRpYyBzZXREZWZhdWx0IChjb250cm9sbGVyKSB7XG4gICAgZGVmYXVsdENvbnRyb2xsZXIgPSBjb250cm9sbGVyXG4gIH1cblxuXG4gIC8qKlxuICAgKiBAZnVuY3Rpb24gPGxpc3RlblBvcHN0YXRlPiBzZXQgZXZlbnQgaW4gdGhlIHdpbmRvdyB0byB0cmlnZ2VyIHRoZSByb3V0ZWRcbiAgICogICAgY29udHJvbGxlclxuICAgKi9cblxuICBzdGF0aWMgbGlzdGVuUG9wc3RhdGUgKCkge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicG9wc3RhdGVcIiwgcG9wc3RhdGUpXG4gICAgaWYgKCFsYXVuY2hlZCkge1xuICAgICAgcG9wc3RhdGUoKVxuICAgIH1cbiAgfVxuXG5cbiAgLyoqXG4gICAqIEBmdW5jdGlvbiA8Z2V0QWxsPiByZXR1cm5zIGEgbGlzdCBvZiBhbGwgcm91dGVzIGF2YWlsYWJsZVxuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG5cbiAgc3RhdGljIGdldEFsbCAoKSB7XG4gICAgY29uc3QgbGlzdCA9IFJPVVRFUlMubWFwKChyb3V0ZXIpID0+IHtcbiAgICAgIHJldHVybiByb3V0ZXIucm91dGVzLm1hcCgocm91dGUpID0+IHtcbiAgICAgICAgcmV0dXJuIHJvdXRlLnBhdGhcbiAgICAgIH0pXG4gICAgfSkuZmxhdCgpXG4gICAgaWYgKGRlZmF1bHRDb250cm9sbGVyKSB7XG4gICAgICBsaXN0LnVuc2hpZnQoXCIqXCIpXG4gICAgfVxuICAgIHJldHVybiBsaXN0XG4gIH1cbn1cblxuXG4vKipcbiAqIEBmdW5jdGlvbiA8cG9wc3RhdGU+IGlzIHRyaWdnZXJlZCB3aGVuIHBhZ2UgaXMgbG9hZGVkIG9yIG5hdmlnYXRpb24gY2hhbmdlcy5cbiAqIEFsc28gc2V0cyBSb3V0ZXIuY3VycmVudCBpZiBhIFJvdXRlIGlzIGZvdW5kLCBlbHNlIHNldHMgZGVmYXVsdCBjb250cm9sbGVyXG4gKiBpZiBpdCBleGlzdHMuXG4gKi9cblxuZnVuY3Rpb24gcG9wc3RhdGUgKCkge1xuICBsYXVuY2hlZCA9IHRydWVcbiAgbGV0IHJvdXRlLCBmb3VuZFxuICBST1VURVJTLmZvckVhY2goKHJvdXRlcikgPT4ge1xuICAgIGlmICghcm91dGUpIHtcbiAgICAgIHJvdXRlID0gcm91dGVyLnRlc3QoKVxuICAgICAgZm91bmQgPSByb3V0ZXJcbiAgICB9XG4gIH0pXG4gIGlmIChyb3V0ZSkge1xuICAgIGZvdW5kLmNhbGxGaXJzdCgpXG4gICAgcm91dGUucnVuKClcbiAgICBSb3V0ZXIuY3VycmVudCA9IHJvdXRlXG4gIH1cbiAgZWxzZSBpZiAodHlwZW9mIGRlZmF1bHRDb250cm9sbGVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICBkZWZhdWx0Q29udHJvbGxlcigpXG4gIH1cbn1cbiJdfQ==
